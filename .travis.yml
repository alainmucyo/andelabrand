language: node_js

node_js:
  - stable

services:
  - mongodb

cache:
  npm: false

notifications:
  email: false

script:
  - cd server/
  - npm ci
  - npm test
  - npm run coverage

after_success:
  - npm run coveralls

branches:
  only:
    - deploy
    - develop

deploy:
  provider: heroku
  api_key:
    secure: CgrihbTeXwg32eJvAY1lVThQnyaXUSS4OhnKLdInTNYnTFR9kFUZTVq412sip2M9dq0oG1E560RWo8g4vM063nuAEBh+LDcJkqQcGm/d7ZShvngLZ2mycqvsV7hQea+dHIyc6bG60oxeFlDjh2uWnvAwC9f/RUdQsT3kzqn4TKeIzUrV6x8YlPsg3cJpCM3nfD2Z9XsMbkeAO0adHT5uU2CwB/V1NX7LyqtSj3aQ/s2WpB6KkO67x7Xvz5DcmHNDl26EGpk8gLzFc4Kss7GZmqmiZWmLloai2mvc1y6KM2WQJutcQJUYvk3Rb8IfW2zMCIpEv/t4lByzdv7cuPusp7UeOKlU7A3YCB2sMSScRrnJdO3u9U9F0OCRMAfmcGDG5jX5Os6gl6LoF0dAFcrMV86afnmsPkSIoYoxRueSHET4saEEIiJl5MUzeEqdsZ3Kohmq5Cr2D/I3sRV1wvglW7mj88aM12YrO0EDuh8mMQE4lUOKNzP9WmzD+wjRPir8jJHubB/sPMPf6N8RZ/IKWydMKId+rOUTh7GN3ZORLn2g+ETH3FaaJvANM9PAXH+ffXIWMlAiLnPPec6xAQN55J/uDojHXPmWfO5wekCGk91A6kdFbzwU8x86X2Vf+54vyE47njOcfydWg5i5vxguNw3KFpOOxognbcVqiWwn3EY=
  app:
    deploy: alainmucyo-staging
    develop: alainmucyo
