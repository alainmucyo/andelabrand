{"/home/alain/Documents/andela/andelabrand/server/index.js":{"path":"/home/alain/Documents/andela/andelabrand/server/index.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"4":{"start":{"line":12,"column":16},"end":{"line":12,"column":59}},"5":{"start":{"line":14,"column":13},"end":{"line":14,"column":69}},"6":{"start":{"line":16,"column":15},"end":{"line":16,"column":73}},"7":{"start":{"line":18,"column":15},"end":{"line":18,"column":73}},"8":{"start":{"line":20,"column":12},"end":{"line":20,"column":67}},"9":{"start":{"line":22,"column":13},"end":{"line":22,"column":69}},"10":{"start":{"line":24,"column":20},"end":{"line":24,"column":52}},"11":{"start":{"line":26,"column":16},"end":{"line":26,"column":59}},"12":{"start":{"line":28,"column":17},"end":{"line":28,"column":45}},"13":{"start":{"line":30,"column":11},"end":{"line":30,"column":39}},"14":{"start":{"line":31,"column":10},"end":{"line":31,"column":36}},"15":{"start":{"line":32,"column":15},"end":{"line":32,"column":43}},"16":{"start":{"line":34,"column":0},"end":{"line":52,"column":3}},"17":{"start":{"line":37,"column":2},"end":{"line":37,"column":38}},"18":{"start":{"line":38,"column":2},"end":{"line":38,"column":48}},"19":{"start":{"line":39,"column":2},"end":{"line":39,"column":43}},"20":{"start":{"line":40,"column":2},"end":{"line":40,"column":47}},"21":{"start":{"line":41,"column":2},"end":{"line":41,"column":47}},"22":{"start":{"line":42,"column":2},"end":{"line":42,"column":41}},"23":{"start":{"line":43,"column":2},"end":{"line":43,"column":43}},"24":{"start":{"line":44,"column":2},"end":{"line":44,"column":52}},"25":{"start":{"line":46,"column":2},"end":{"line":46,"column":51}},"26":{"start":{"line":48,"column":2},"end":{"line":48,"column":45}},"27":{"start":{"line":49,"column":2},"end":{"line":51,"column":5}},"28":{"start":{"line":50,"column":4},"end":{"line":50,"column":84}},"29":{"start":{"line":54,"column":15},"end":{"line":54,"column":18}},"30":{"start":{"line":55,"column":0},"end":{"line":55,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":36,"column":8},"end":{"line":36,"column":9}},"loc":{"start":{"line":36,"column":20},"end":{"line":52,"column":1}},"line":36},"1":{"name":"(anonymous_1)","decl":{"start":{"line":49,"column":19},"end":{"line":49,"column":20}},"loc":{"start":{"line":49,"column":31},"end":{"line":51,"column":3}},"line":49}},"branchMap":{"0":{"loc":{"start":{"line":30,"column":11},"end":{"line":30,"column":39}},"type":"binary-expr","locations":[{"start":{"line":30,"column":11},"end":{"line":30,"column":31}},{"start":{"line":30,"column":35},"end":{"line":30,"column":39}}],"line":30}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1},"f":{"0":1,"1":1},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["port","process","env","APP_PORT","app","database","DB_TEST_DATABASE","mongoose","connect","DB_CONNECTION_URL","useNewUrlParser","then","use","express","json","upload","single","queryRoutes","articleRoutes","commentRoutes","authRoutes","adminRoutes","passport","jwtStrategy","initialize","listen","console","log","APP_URL"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA,IAAMA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,IAArC;AACA,IAAMC,GAAG,GAAG,0BAAZ;AACA,IAAMC,QAAQ,GAAGJ,OAAO,CAACC,GAAR,CAAYI,gBAA7B,C,CACA;;AACAC,qBAASC,OAAT,WAAoBP,OAAO,CAACC,GAAR,CAAYO,iBAAhC,cAAqDJ,QAArD,GAAiE;AAACK,EAAAA,eAAe,EAAE;AAAlB,CAAjE,EACKC,IADL,CACU,YAAM;AACRP,EAAAA,GAAG,CAACQ,GAAJ,CAAQC,oBAAQC,IAAR,EAAR;AACAV,EAAAA,GAAG,CAACQ,GAAJ,CAAQG,qBAAOC,MAAP,CAAc,OAAd,CAAR;AACAZ,EAAAA,GAAG,CAACQ,GAAJ,CAAQ,YAAR,EAAsBK,iBAAtB;AACAb,EAAAA,GAAG,CAACQ,GAAJ,CAAQ,cAAR,EAAwBM,mBAAxB;AACAd,EAAAA,GAAG,CAACQ,GAAJ,CAAQ,cAAR,EAAwBO,mBAAxB;AACAf,EAAAA,GAAG,CAACQ,GAAJ,CAAQ,WAAR,EAAqBQ,gBAArB;AACAhB,EAAAA,GAAG,CAACQ,GAAJ,CAAQ,YAAR,EAAsBS,iBAAtB;AACAjB,EAAAA,GAAG,CAACQ,GAAJ,CAAQC,8BAAe,SAAf,CAAR;;AACAS,uBAASV,GAAT,CAAaW,sBAAb;;AACAnB,EAAAA,GAAG,CAACQ,GAAJ,CAAQU,qBAASE,UAAT,EAAR;AACApB,EAAAA,GAAG,CAACqB,MAAJ,CAAWzB,IAAX,EAAiB,YAAM;AACnB0B,IAAAA,OAAO,CAACC,GAAR,6BAAiC1B,OAAO,CAACC,GAAR,CAAY0B,OAA7C,cAAwD5B,IAAxD;AACH,GAFD;AAGH,CAfL;;eAgBeI,G","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/","sourcesContent":["import express from 'express'\nimport mongoose from \"mongoose\"\nimport queryRoutes from \"./router/query.routes\";\nimport articleRoutes from \"./router/article.routes\";\nimport commentRoutes from \"./router/comment.routes\";\nimport authRoutes from \"./router/auth.routes\";\nimport adminRoutes from \"./router/admin.routes\";\nimport {upload} from \"./utils/file-uploader\";\nimport passport from \"passport\"\nimport {jwtStrategy} from \"./config/passport\";\nconst port = process.env.APP_PORT || 5000\nconst app = express()\nconst database=  process.env.DB_TEST_DATABASE\n// const database = process.env.APP_ENV == \"test\" ? process.env.DB_TEST_DATABASE : process.env.DB_DATABASE\nmongoose.connect(`${process.env.DB_CONNECTION_URL}/${database}`, {useNewUrlParser: true})\n    .then(() => {\n        app.use(express.json())\n        app.use(upload.single(\"image\"))\n        app.use(\"/api/query\", queryRoutes)\n        app.use(\"/api/article\", articleRoutes)\n        app.use(\"/api/comment\", commentRoutes)\n        app.use(\"/api/auth\", authRoutes)\n        app.use(\"/api/admin\", adminRoutes)\n        app.use(express.static('storage'))\n        passport.use(jwtStrategy)\n        app.use(passport.initialize());\n        app.listen(port, () => {\n            console.log(`Server started at ${process.env.APP_URL}:${port}`)\n        })\n    })\nexport default app"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3904adc2b6500aef1581331b3b610e974ee5bed2","contentHash":"7b46d0d2278946d0305ee08a43f329c48986aa85d8a16f201a5b56c74362c73e"},"/home/alain/Documents/andela/andelabrand/server/router/query.routes.js":{"path":"/home/alain/Documents/andela/andelabrand/server/router/query.routes.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"4":{"start":{"line":12,"column":23},"end":{"line":12,"column":88}},"5":{"start":{"line":14,"column":14},"end":{"line":14,"column":46}},"6":{"start":{"line":16,"column":16},"end":{"line":16,"column":59}},"7":{"start":{"line":18,"column":13},"end":{"line":18,"column":41}},"8":{"start":{"line":20,"column":0},"end":{"line":20,"column":94}},"9":{"start":{"line":21,"column":0},"end":{"line":21,"column":52}},"10":{"start":{"line":22,"column":15},"end":{"line":22,"column":21}},"11":{"start":{"line":23,"column":0},"end":{"line":23,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["query.routes.js"],"names":["router","express","Router","get","passport","QueryController","index","post","store"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,IAAMA,MAAM,GAAGC,oBAAQC,MAAR,EAAf;;AACAF,MAAM,CAACG,GAAP,CAAW,GAAX,EAAgB,oBAAOC,oBAAP,CAAhB,EAAiCC,4BAAgBC,KAAjD;AACCN,MAAM,CAACO,IAAP,CAAY,GAAZ,EAAiBF,4BAAgBG,KAAjC;eACcR,M","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/router/","sourcesContent":["import express from \"express\"\nimport QueryController from \"../controllers/QueryController\";\nimport {isAuth} from \"../middleware/is-auth\";\nimport passport from \"passport\";\n\nconst router = express.Router()\nrouter.get(\"/\", isAuth(passport),QueryController.index)\n router.post(\"/\", QueryController.store)\nexport default router"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"82e5beccc15cacfd7baa437b549758d732fd2643","contentHash":"6835a292b126767928a8553e45ac0a131de20d17821e416eab835a132229ba65"},"/home/alain/Documents/andela/andelabrand/server/controllers/QueryController.js":{"path":"/home/alain/Documents/andela/andelabrand/server/controllers/QueryController.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":23},"end":{"line":14,"column":95}},"6":{"start":{"line":16,"column":20},"end":{"line":16,"column":89}},"7":{"start":{"line":18,"column":13},"end":{"line":18,"column":63}},"8":{"start":{"line":20,"column":14},"end":{"line":20,"column":40}},"9":{"start":{"line":22,"column":16},"end":{"line":22,"column":44}},"10":{"start":{"line":24,"column":13},"end":{"line":24,"column":78}},"11":{"start":{"line":26,"column":35},"end":{"line":108,"column":3}},"12":{"start":{"line":28,"column":4},"end":{"line":28,"column":60}},"13":{"start":{"line":31,"column":2},"end":{"line":106,"column":6}},"14":{"start":{"line":34,"column":19},"end":{"line":53,"column":9}},"15":{"start":{"line":36,"column":8},"end":{"line":52,"column":20}},"16":{"start":{"line":37,"column":10},"end":{"line":51,"column":11}},"17":{"start":{"line":38,"column":12},"end":{"line":50,"column":13}},"18":{"start":{"line":40,"column":16},"end":{"line":40,"column":34}},"19":{"start":{"line":41,"column":16},"end":{"line":41,"column":48}},"20":{"start":{"line":44,"column":16},"end":{"line":44,"column":40}},"21":{"start":{"line":45,"column":16},"end":{"line":45,"column":112}},"22":{"start":{"line":49,"column":16},"end":{"line":49,"column":39}},"23":{"start":{"line":56,"column":8},"end":{"line":56,"column":45}},"24":{"start":{"line":59,"column":6},"end":{"line":59,"column":19}},"25":{"start":{"line":64,"column":19},"end":{"line":98,"column":9}},"26":{"start":{"line":67,"column":8},"end":{"line":97,"column":21}},"27":{"start":{"line":68,"column":10},"end":{"line":96,"column":11}},"28":{"start":{"line":69,"column":12},"end":{"line":95,"column":13}},"29":{"start":{"line":71,"column":16},"end":{"line":71,"column":100}},"30":{"start":{"line":73,"column":16},"end":{"line":76,"column":17}},"31":{"start":{"line":74,"column":18},"end":{"line":74,"column":37}},"32":{"start":{"line":75,"column":18},"end":{"line":75,"column":24}},"33":{"start":{"line":78,"column":16},"end":{"line":78,"column":109}},"34":{"start":{"line":81,"column":16},"end":{"line":85,"column":19}},"35":{"start":{"line":86,"column":16},"end":{"line":86,"column":35}},"36":{"start":{"line":87,"column":16},"end":{"line":87,"column":36}},"37":{"start":{"line":90,"column":16},"end":{"line":90,"column":114}},"38":{"start":{"line":94,"column":16},"end":{"line":94,"column":40}},"39":{"start":{"line":101,"column":8},"end":{"line":101,"column":45}},"40":{"start":{"line":104,"column":6},"end":{"line":104,"column":19}},"41":{"start":{"line":107,"column":2},"end":{"line":107,"column":25}},"42":{"start":{"line":110,"column":15},"end":{"line":110,"column":30}},"43":{"start":{"line":111,"column":0},"end":{"line":111,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":26,"column":35},"end":{"line":26,"column":36}},"loc":{"start":{"line":26,"column":47},"end":{"line":108,"column":1}},"line":26},"1":{"name":"QueryController","decl":{"start":{"line":27,"column":11},"end":{"line":27,"column":26}},"loc":{"start":{"line":27,"column":29},"end":{"line":29,"column":3}},"line":27},"2":{"name":"(anonymous_2)","decl":{"start":{"line":33,"column":11},"end":{"line":33,"column":12}},"loc":{"start":{"line":33,"column":23},"end":{"line":60,"column":5}},"line":33},"3":{"name":"_callee","decl":{"start":{"line":34,"column":106},"end":{"line":34,"column":113}},"loc":{"start":{"line":34,"column":124},"end":{"line":53,"column":7}},"line":34},"4":{"name":"_callee$","decl":{"start":{"line":36,"column":53},"end":{"line":36,"column":61}},"loc":{"start":{"line":36,"column":72},"end":{"line":52,"column":9}},"line":36},"5":{"name":"index","decl":{"start":{"line":55,"column":15},"end":{"line":55,"column":20}},"loc":{"start":{"line":55,"column":30},"end":{"line":57,"column":7}},"line":55},"6":{"name":"(anonymous_6)","decl":{"start":{"line":63,"column":11},"end":{"line":63,"column":12}},"loc":{"start":{"line":63,"column":23},"end":{"line":105,"column":5}},"line":63},"7":{"name":"_callee2","decl":{"start":{"line":64,"column":106},"end":{"line":64,"column":114}},"loc":{"start":{"line":64,"column":125},"end":{"line":98,"column":7}},"line":64},"8":{"name":"_callee2$","decl":{"start":{"line":67,"column":53},"end":{"line":67,"column":62}},"loc":{"start":{"line":67,"column":74},"end":{"line":97,"column":9}},"line":67},"9":{"name":"store","decl":{"start":{"line":100,"column":15},"end":{"line":100,"column":20}},"loc":{"start":{"line":100,"column":31},"end":{"line":102,"column":7}},"line":100}},"branchMap":{"0":{"loc":{"start":{"line":38,"column":12},"end":{"line":50,"column":13}},"type":"switch","locations":[{"start":{"line":39,"column":14},"end":{"line":41,"column":48}},{"start":{"line":43,"column":14},"end":{"line":45,"column":112}},{"start":{"line":47,"column":14},"end":{"line":47,"column":21}},{"start":{"line":48,"column":14},"end":{"line":49,"column":39}}],"line":38},"1":{"loc":{"start":{"line":69,"column":12},"end":{"line":95,"column":13}},"type":"switch","locations":[{"start":{"line":70,"column":14},"end":{"line":78,"column":109}},{"start":{"line":80,"column":14},"end":{"line":87,"column":36}},{"start":{"line":89,"column":14},"end":{"line":90,"column":114}},{"start":{"line":92,"column":14},"end":{"line":92,"column":21}},{"start":{"line":93,"column":14},"end":{"line":94,"column":40}}],"line":69},"2":{"loc":{"start":{"line":73,"column":16},"end":{"line":76,"column":17}},"type":"if","locations":[{"start":{"line":73,"column":16},"end":{"line":76,"column":17}},{"start":{"line":73,"column":16},"end":{"line":76,"column":17}}],"line":73}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":1,"14":1,"15":1,"16":3,"17":3,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":3,"27":7,"28":8,"29":3,"30":3,"31":1,"32":1,"33":2,"34":1,"35":1,"36":1,"37":1,"38":3,"39":3,"40":1,"41":1,"42":1,"43":1},"f":{"0":1,"1":0,"2":1,"3":1,"4":3,"5":1,"6":1,"7":3,"8":7,"9":3},"b":{"0":[1,1,0,1],"1":[3,1,1,0,3],"2":[1,2]},"inputSourceMap":{"version":3,"sources":["QueryController.js"],"names":["QueryController","req","res","Query","find","queries","body","error","details","message","query","name","email","content","save"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;IAEMA,e;;;;;;;;kHACiBC,G,EAAKC,G;;;;;;;uBACEC,kBAAMC,IAAN,E;;;AAAhBC,gBAAAA,O;iDACC,4BAAaH,GAAb,EAAkB,kBAAlB,EAAsCG,OAAtC,C;;;;;;;;;;;;;;;;;;;mHAGQJ,G,EAAKC,G;;;;;;;mCACJ,uBAAgBD,GAAG,CAACK,IAApB,C,EAATC,K,oBAAAA,K;;qBAEHA,K;;;;;kDACO,sBAASL,GAAT,EAAc,GAAd,EAAmBK,KAAK,CAACC,OAAN,CAAc,CAAd,EAAiBC,OAApC,C;;;AAELC,gBAAAA,K,GAAQ,IAAIP,iBAAJ,CAAU;AACpBQ,kBAAAA,IAAI,EAAEV,GAAG,CAACK,IAAJ,CAASK,IADK;AAEpBC,kBAAAA,KAAK,EAAEX,GAAG,CAACK,IAAJ,CAASM,KAFI;AAGpBC,kBAAAA,OAAO,EAAEZ,GAAG,CAACK,IAAJ,CAASO;AAHE,iBAAV,C;;uBAKRH,KAAK,CAACI,IAAN,E;;;kDACC,4BAAaZ,GAAb,EAAkB,gBAAlB,EAAoCQ,KAApC,EAA2C,GAA3C,C;;;;;;;;;;;;;;;;;;;;eAIAV,e","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/controllers/","sourcesContent":["import Query from \"../models/Query\";\nimport {NewError} from \"../utils/errors\";\nimport {JsonResponse} from \"../utils/response\";\nimport queryValidation from \"../validations/query.validator\";\n\nclass QueryController {\n    static async index(req, res) {\n        const queries = await Query.find()\n        return JsonResponse(res, \"Listing queries!\", queries)\n    }\n\n    static async store(req, res) {\n        const {error} = queryValidation(req.body);\n\n        if (error) {\n            return NewError(res, 422, error.details[0].message)\n        }\n        const query = new Query({\n            name: req.body.name,\n            email: req.body.email,\n            content: req.body.content,\n        })\n        await query.save()\n        return JsonResponse(res, \"Query Created!\", query, 201)\n    }\n}\n\nexport default QueryController"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a3909c5ac75aa11e267ec68fd6446273b02e6588","contentHash":"b97f11126880c77dcbebcd5f0a9d48e8c621994b60ada9241f05a38b428decff"},"/home/alain/Documents/andela/andelabrand/server/models/Query.js":{"path":"/home/alain/Documents/andela/andelabrand/server/models/Query.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":16},"end":{"line":10,"column":59}},"4":{"start":{"line":12,"column":13},"end":{"line":29,"column":2}},"5":{"start":{"line":31,"column":15},"end":{"line":31,"column":58}},"6":{"start":{"line":33,"column":0},"end":{"line":33,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["Query.js"],"names":["Schema","mongoose","name","type","String","required","email","content","createdAt","Date","now","model"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAMA,MAAM,GAAGC,qBAASD,MAAT,CAAgB;AAC3BE,EAAAA,IAAI,EAAE;AAACC,IAAAA,IAAI,EAAEC,MAAP;AAAeC,IAAAA,QAAQ,EAAE;AAAzB,GADqB;AAE3BC,EAAAA,KAAK,EAAE;AAACH,IAAAA,IAAI,EAAEC,MAAP;AAAeC,IAAAA,QAAQ,EAAE;AAAzB,GAFoB;AAG3BE,EAAAA,OAAO,EAAE;AAACJ,IAAAA,IAAI,EAAEC,MAAP;AAAeC,IAAAA,QAAQ,EAAE;AAAzB,GAHkB;AAI3BG,EAAAA,SAAS,EAAE;AAACL,IAAAA,IAAI,EAAEM,IAAP;AAAa,eAASA,IAAI,CAACC;AAA3B;AAJgB,CAAhB,CAAf;;eAOeT,qBAASU,KAAT,CAAe,OAAf,EAAwBX,MAAxB,C","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/models/","sourcesContent":["import mongoose from 'mongoose'\n\nconst Schema = mongoose.Schema({\n    name: {type: String, required: true},\n    email: {type: String, required: true},\n    content: {type: String, required: true},\n    createdAt: {type: Date, default: Date.now},\n})\n\nexport default mongoose.model(\"Query\", Schema)"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f866f37a3414668a8cdfb3b7347698a8124323a6","contentHash":"378d3567857b14546b0ebcc75e4fb435a6d873a266110d7204577bebd50b36d1"},"/home/alain/Documents/andela/andelabrand/server/utils/errors.js":{"path":"/home/alain/Documents/andela/andelabrand/server/utils/errors.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":26}},"2":{"start":{"line":8,"column":15},"end":{"line":12,"column":1}},"3":{"start":{"line":9,"column":2},"end":{"line":11,"column":5}},"4":{"start":{"line":14,"column":0},"end":{"line":14,"column":28}}},"fnMap":{"0":{"name":"NewError","decl":{"start":{"line":8,"column":24},"end":{"line":8,"column":32}},"loc":{"start":{"line":8,"column":55},"end":{"line":12,"column":1}},"line":8}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":11,"4":1},"f":{"0":11},"b":{},"inputSourceMap":{"version":3,"sources":["errors.js"],"names":["NewError","res","status","message","send"],"mappings":";;;;;;;AAAO,IAAMA,QAAQ,GAAG,SAAXA,QAAW,CAACC,GAAD,EAAKC,MAAL,EAAYC,OAAZ,EAAwB;AACzC,SAAQF,GAAG,CAACC,MAAJ,CAAWA,MAAX,EAAmBE,IAAnB,CAAwB;AAACD,IAAAA,OAAO,EAAPA;AAAD,GAAxB,CAAR;AACN,CAFM","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/utils/","sourcesContent":["export const NewError = (res,status,message) => {\n       return  res.status(status).send({message})\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b94860f12c0500138c52e678bb70dc4424cf053b","contentHash":"ac7819bde8de3f91db9fad0d62950e06ea7d734dad6628291d09e0a186cdf633"},"/home/alain/Documents/andela/andelabrand/server/utils/response.js":{"path":"/home/alain/Documents/andela/andelabrand/server/utils/response.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"2":{"start":{"line":8,"column":19},"end":{"line":14,"column":1}},"3":{"start":{"line":9,"column":15},"end":{"line":9,"column":86}},"4":{"start":{"line":10,"column":2},"end":{"line":13,"column":5}},"5":{"start":{"line":16,"column":0},"end":{"line":16,"column":36}}},"fnMap":{"0":{"name":"JsonResponse","decl":{"start":{"line":8,"column":28},"end":{"line":8,"column":40}},"loc":{"start":{"line":8,"column":61},"end":{"line":14,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":15},"end":{"line":9,"column":86}},"type":"cond-expr","locations":[{"start":{"line":9,"column":68},"end":{"line":9,"column":80}},{"start":{"line":9,"column":83},"end":{"line":9,"column":86}}],"line":9},"1":{"loc":{"start":{"line":9,"column":15},"end":{"line":9,"column":65}},"type":"binary-expr","locations":[{"start":{"line":9,"column":15},"end":{"line":9,"column":35}},{"start":{"line":9,"column":39},"end":{"line":9,"column":65}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":15,"4":15,"5":1},"f":{"0":15},"b":{"0":[6,9],"1":[15,6]},"inputSourceMap":{"version":3,"sources":["response.js"],"names":["JsonResponse","res","message","data","status","send"],"mappings":";;;;;;;AAAO,IAAMA,YAAY,GAAG,SAAfA,YAAe,CAACC,GAAD,EAAMC,OAAN,EAAeC,IAAf,EAAsC;AAAA,MAAjBC,MAAiB,uEAAR,GAAQ;AAC9D,SAAOH,GAAG,CAACG,MAAJ,CAAWA,MAAX,EAAmBC,IAAnB,CAAwB;AAACH,IAAAA,OAAO,EAAPA,OAAD;AAAUC,IAAAA,IAAI,EAAJA;AAAV,GAAxB,CAAP;AACH,CAFM","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/utils/","sourcesContent":["export const JsonResponse = (res, message, data, status = 200) => {\n    return res.status(status).send({message, data})\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"81af7cee428c3f19458cce72d1c778c41dcd5ff7","contentHash":"8b7153ed1774b6b6bc2ce2b055732f7b27fa45a571263c89171f07d6bac41c17"},"/home/alain/Documents/andela/andelabrand/server/validations/query.validator.js":{"path":"/home/alain/Documents/andela/andelabrand/server/validations/query.validator.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":11},"end":{"line":10,"column":49}},"4":{"start":{"line":12,"column":22},"end":{"line":20,"column":1}},"5":{"start":{"line":13,"column":20},"end":{"line":17,"column":4}},"6":{"start":{"line":19,"column":2},"end":{"line":19,"column":36}},"7":{"start":{"line":22,"column":15},"end":{"line":22,"column":30}},"8":{"start":{"line":23,"column":0},"end":{"line":23,"column":30}}},"fnMap":{"0":{"name":"queryValidation","decl":{"start":{"line":12,"column":31},"end":{"line":12,"column":46}},"loc":{"start":{"line":12,"column":53},"end":{"line":20,"column":1}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":3,"6":3,"7":1,"8":1},"f":{"0":3},"b":{},"inputSourceMap":{"version":3,"sources":["query.validator.js"],"names":["queryValidation","body","querySchema","joi","object","name","string","required","min","max","email","content","validate"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAMA,eAAe,GAAI,SAAnBA,eAAmB,CAACC,IAAD,EAAU;AAC/B,MAAMC,WAAW,GAAGC,gBAAIC,MAAJ,CAAW;AAC3BC,IAAAA,IAAI,EAAEF,gBAAIG,MAAJ,GAAaC,QAAb,GAAwBC,GAAxB,CAA4B,CAA5B,EAA+BC,GAA/B,CAAmC,EAAnC,CADqB;AAE3BC,IAAAA,KAAK,EAAEP,gBAAIG,MAAJ,GAAaI,KAAb,GAAqBH,QAArB,EAFoB;AAG3BI,IAAAA,OAAO,EAAER,gBAAIG,MAAJ,GAAaC,QAAb,GAAwBC,GAAxB,CAA4B,EAA5B;AAHkB,GAAX,CAApB;;AAKA,SAAON,WAAW,CAACU,QAAZ,CAAqBX,IAArB,CAAP;AACH,CAPD;;eAQeD,e","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/validations/","sourcesContent":["import joi from 'joi'\n\nconst queryValidation =  (body) => {\n    const querySchema = joi.object({\n        name: joi.string().required().min(3).max(20),\n        email: joi.string().email().required(),\n        content: joi.string().required().min(10),\n    })\n    return querySchema.validate(body)\n}\nexport default queryValidation"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8a6300e8070e0c82c4af222a827731c26cc8cb1b","contentHash":"298ccfb9c144b4fef53dff67272dddd70e22000c5efe88442a0c58bbc6ceaa10"},"/home/alain/Documents/andela/andelabrand/server/middleware/is-auth.js":{"path":"/home/alain/Documents/andela/andelabrand/server/middleware/is-auth.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":24}},"2":{"start":{"line":8,"column":13},"end":{"line":12,"column":1}},"3":{"start":{"line":9,"column":2},"end":{"line":11,"column":5}},"4":{"start":{"line":14,"column":0},"end":{"line":14,"column":24}}},"fnMap":{"0":{"name":"isAuth","decl":{"start":{"line":8,"column":22},"end":{"line":8,"column":28}},"loc":{"start":{"line":8,"column":39},"end":{"line":12,"column":1}},"line":8}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":7,"4":1},"f":{"0":7},"b":{},"inputSourceMap":{"version":3,"sources":["is-auth.js"],"names":["isAuth","passport","authenticate","session"],"mappings":";;;;;;;AAAO,IAAMA,MAAM,GAAG,SAATA,MAAS,CAACC,QAAD,EAAc;AAChC,SAAQA,QAAQ,CAACC,YAAT,CAAsB,KAAtB,EAA6B;AAACC,IAAAA,OAAO,EAAE;AAAV,GAA7B,CAAR;AACH,CAFM","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/middleware/","sourcesContent":["export const isAuth = (passport) => {\n    return  passport.authenticate(\"jwt\", {session: false})\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"326ea59362fa1b30941f3a13ebfa16ffbd47dc05","contentHash":"877a26ac8e312789c5a13d0a2a75c22e6695ab71b995b5ab52bb6ba99289e628"},"/home/alain/Documents/andela/andelabrand/server/router/article.routes.js":{"path":"/home/alain/Documents/andela/andelabrand/server/router/article.routes.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":92}},"5":{"start":{"line":14,"column":14},"end":{"line":14,"column":46}},"6":{"start":{"line":16,"column":16},"end":{"line":16,"column":59}},"7":{"start":{"line":18,"column":13},"end":{"line":18,"column":41}},"8":{"start":{"line":20,"column":0},"end":{"line":20,"column":53}},"9":{"start":{"line":21,"column":0},"end":{"line":21,"column":55}},"10":{"start":{"line":22,"column":0},"end":{"line":22,"column":97}},"11":{"start":{"line":23,"column":0},"end":{"line":23,"column":100}},"12":{"start":{"line":24,"column":0},"end":{"line":24,"column":107}},"13":{"start":{"line":25,"column":0},"end":{"line":25,"column":63}},"14":{"start":{"line":26,"column":15},"end":{"line":26,"column":21}},"15":{"start":{"line":27,"column":0},"end":{"line":27,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["article.routes.js"],"names":["router","express","Router","get","ArticleController","index","show","post","passport","store","put","update","destroy","addLike"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,IAAMA,MAAM,GAAGC,oBAAQC,MAAR,EAAf;;AACAF,MAAM,CAACG,GAAP,CAAW,GAAX,EAAgBC,8BAAkBC,KAAlC;AACAL,MAAM,CAACG,GAAP,CAAW,MAAX,EAAmBC,8BAAkBE,IAArC;AACAN,MAAM,CAACO,IAAP,CAAY,GAAZ,EAAiB,oBAAOC,oBAAP,CAAjB,EAAmCJ,8BAAkBK,KAArD;AACAT,MAAM,CAACU,GAAP,CAAW,MAAX,EAAmB,oBAAOF,oBAAP,CAAnB,EAAqCJ,8BAAkBO,MAAvD;AACAX,MAAM,UAAN,CAAc,MAAd,EAAsB,oBAAOQ,oBAAP,CAAtB,EAAwCJ,8BAAkBQ,OAA1D;AACAZ,MAAM,CAACU,GAAP,CAAW,WAAX,EAAwBN,8BAAkBS,OAA1C;eACeb,M","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/router/","sourcesContent":["import express from \"express\"\nimport ArticleController from \"../controllers/ArticleController\";\nimport {isAuth} from \"../middleware/is-auth\";\nimport  passport from \"passport\";\n\nconst router = express.Router()\nrouter.get(\"/\", ArticleController.index)\nrouter.get(\"/:id\", ArticleController.show)\nrouter.post(\"/\", isAuth(passport), ArticleController.store)\nrouter.put(\"/:id\", isAuth(passport), ArticleController.update)\nrouter.delete(\"/:id\", isAuth(passport), ArticleController.destroy)\nrouter.put(\"/like/:id\", ArticleController.addLike)\nexport default router"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c3a7dd0cc67397f4f8e4633a18ae426bd7c3aa76","contentHash":"7a52002c50597670e930a4aede6a24172f61c1f29ffcbcfb17332ccd7d4b4cbf"},"/home/alain/Documents/andela/andelabrand/server/controllers/ArticleController.js":{"path":"/home/alain/Documents/andela/andelabrand/server/controllers/ArticleController.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":23},"end":{"line":14,"column":95}},"6":{"start":{"line":16,"column":20},"end":{"line":16,"column":89}},"7":{"start":{"line":18,"column":14},"end":{"line":18,"column":40}},"8":{"start":{"line":20,"column":16},"end":{"line":20,"column":44}},"9":{"start":{"line":22,"column":15},"end":{"line":22,"column":67}},"10":{"start":{"line":24,"column":15},"end":{"line":24,"column":82}},"11":{"start":{"line":26,"column":24},"end":{"line":26,"column":61}},"12":{"start":{"line":28,"column":37},"end":{"line":353,"column":3}},"13":{"start":{"line":30,"column":4},"end":{"line":30,"column":62}},"14":{"start":{"line":33,"column":2},"end":{"line":351,"column":6}},"15":{"start":{"line":36,"column":19},"end":{"line":61,"column":9}},"16":{"start":{"line":38,"column":8},"end":{"line":60,"column":36}},"17":{"start":{"line":39,"column":10},"end":{"line":59,"column":11}},"18":{"start":{"line":40,"column":12},"end":{"line":58,"column":13}},"19":{"start":{"line":42,"column":16},"end":{"line":42,"column":34}},"20":{"start":{"line":43,"column":16},"end":{"line":43,"column":34}},"21":{"start":{"line":44,"column":16},"end":{"line":44,"column":50}},"22":{"start":{"line":47,"column":16},"end":{"line":47,"column":40}},"23":{"start":{"line":48,"column":16},"end":{"line":48,"column":112}},"24":{"start":{"line":51,"column":16},"end":{"line":51,"column":34}},"25":{"start":{"line":52,"column":16},"end":{"line":52,"column":51}},"26":{"start":{"line":53,"column":16},"end":{"line":53,"column":98}},"27":{"start":{"line":57,"column":16},"end":{"line":57,"column":39}},"28":{"start":{"line":64,"column":8},"end":{"line":64,"column":45}},"29":{"start":{"line":67,"column":6},"end":{"line":67,"column":19}},"30":{"start":{"line":72,"column":19},"end":{"line":135,"column":9}},"31":{"start":{"line":75,"column":8},"end":{"line":134,"column":38}},"32":{"start":{"line":76,"column":10},"end":{"line":133,"column":11}},"33":{"start":{"line":77,"column":12},"end":{"line":132,"column":13}},"34":{"start":{"line":79,"column":16},"end":{"line":79,"column":35}},"35":{"start":{"line":80,"column":16},"end":{"line":80,"column":106}},"36":{"start":{"line":82,"column":16},"end":{"line":85,"column":17}},"37":{"start":{"line":83,"column":18},"end":{"line":83,"column":37}},"38":{"start":{"line":84,"column":18},"end":{"line":84,"column":24}},"39":{"start":{"line":87,"column":16},"end":{"line":87,"column":109}},"40":{"start":{"line":90,"column":16},"end":{"line":93,"column":17}},"41":{"start":{"line":91,"column":18},"end":{"line":91,"column":37}},"42":{"start":{"line":92,"column":18},"end":{"line":92,"column":24}},"43":{"start":{"line":95,"column":16},"end":{"line":95,"column":104}},"44":{"start":{"line":98,"column":16},"end":{"line":98,"column":37}},"45":{"start":{"line":99,"column":16},"end":{"line":99,"column":35}},"46":{"start":{"line":100,"column":16},"end":{"line":100,"column":69}},"47":{"start":{"line":103,"column":16},"end":{"line":103,"column":37}},"48":{"start":{"line":105,"column":16},"end":{"line":108,"column":17}},"49":{"start":{"line":106,"column":18},"end":{"line":106,"column":38}},"50":{"start":{"line":107,"column":18},"end":{"line":107,"column":24}},"51":{"start":{"line":110,"column":16},"end":{"line":110,"column":99}},"52":{"start":{"line":113,"column":16},"end":{"line":117,"column":19}},"53":{"start":{"line":118,"column":16},"end":{"line":118,"column":36}},"54":{"start":{"line":119,"column":16},"end":{"line":119,"column":38}},"55":{"start":{"line":122,"column":16},"end":{"line":122,"column":118}},"56":{"start":{"line":125,"column":16},"end":{"line":125,"column":36}},"57":{"start":{"line":126,"column":16},"end":{"line":126,"column":53}},"58":{"start":{"line":127,"column":16},"end":{"line":127,"column":99}},"59":{"start":{"line":131,"column":16},"end":{"line":131,"column":40}},"60":{"start":{"line":138,"column":8},"end":{"line":138,"column":45}},"61":{"start":{"line":141,"column":6},"end":{"line":141,"column":19}},"62":{"start":{"line":146,"column":18},"end":{"line":187,"column":9}},"63":{"start":{"line":148,"column":8},"end":{"line":186,"column":38}},"64":{"start":{"line":149,"column":10},"end":{"line":185,"column":11}},"65":{"start":{"line":150,"column":12},"end":{"line":184,"column":13}},"66":{"start":{"line":152,"column":16},"end":{"line":152,"column":35}},"67":{"start":{"line":153,"column":16},"end":{"line":153,"column":35}},"68":{"start":{"line":154,"column":16},"end":{"line":156,"column":40}},"69":{"start":{"line":159,"column":16},"end":{"line":159,"column":41}},"70":{"start":{"line":161,"column":16},"end":{"line":164,"column":17}},"71":{"start":{"line":162,"column":18},"end":{"line":162,"column":37}},"72":{"start":{"line":163,"column":18},"end":{"line":163,"column":24}},"73":{"start":{"line":166,"column":16},"end":{"line":166,"column":105}},"74":{"start":{"line":169,"column":16},"end":{"line":169,"column":32}},"75":{"start":{"line":170,"column":16},"end":{"line":170,"column":35}},"76":{"start":{"line":171,"column":16},"end":{"line":171,"column":38}},"77":{"start":{"line":174,"column":16},"end":{"line":174,"column":111}},"78":{"start":{"line":177,"column":16},"end":{"line":177,"column":36}},"79":{"start":{"line":178,"column":16},"end":{"line":178,"column":53}},"80":{"start":{"line":179,"column":16},"end":{"line":179,"column":104}},"81":{"start":{"line":183,"column":16},"end":{"line":183,"column":40}},"82":{"start":{"line":190,"column":8},"end":{"line":190,"column":44}},"83":{"start":{"line":193,"column":6},"end":{"line":193,"column":18}},"84":{"start":{"line":198,"column":20},"end":{"line":264,"column":9}},"85":{"start":{"line":201,"column":8},"end":{"line":263,"column":38}},"86":{"start":{"line":202,"column":10},"end":{"line":262,"column":11}},"87":{"start":{"line":203,"column":12},"end":{"line":261,"column":13}},"88":{"start":{"line":205,"column":16},"end":{"line":205,"column":35}},"89":{"start":{"line":206,"column":16},"end":{"line":206,"column":108}},"90":{"start":{"line":208,"column":16},"end":{"line":211,"column":17}},"91":{"start":{"line":209,"column":18},"end":{"line":209,"column":37}},"92":{"start":{"line":210,"column":18},"end":{"line":210,"column":24}},"93":{"start":{"line":213,"column":16},"end":{"line":213,"column":109}},"94":{"start":{"line":216,"column":16},"end":{"line":216,"column":35}},"95":{"start":{"line":217,"column":16},"end":{"line":219,"column":19}},"96":{"start":{"line":222,"column":16},"end":{"line":222,"column":41}},"97":{"start":{"line":224,"column":16},"end":{"line":227,"column":17}},"98":{"start":{"line":225,"column":18},"end":{"line":225,"column":37}},"99":{"start":{"line":226,"column":18},"end":{"line":226,"column":24}},"100":{"start":{"line":229,"column":16},"end":{"line":229,"column":105}},"101":{"start":{"line":232,"column":16},"end":{"line":232,"column":47}},"102":{"start":{"line":233,"column":16},"end":{"line":233,"column":51}},"103":{"start":{"line":235,"column":16},"end":{"line":238,"column":17}},"104":{"start":{"line":236,"column":18},"end":{"line":236,"column":38}},"105":{"start":{"line":237,"column":18},"end":{"line":237,"column":24}},"106":{"start":{"line":240,"column":16},"end":{"line":240,"column":36}},"107":{"start":{"line":241,"column":16},"end":{"line":241,"column":78}},"108":{"start":{"line":244,"column":16},"end":{"line":244,"column":47}},"109":{"start":{"line":247,"column":16},"end":{"line":247,"column":36}},"110":{"start":{"line":248,"column":16},"end":{"line":248,"column":38}},"111":{"start":{"line":251,"column":16},"end":{"line":251,"column":118}},"112":{"start":{"line":254,"column":16},"end":{"line":254,"column":36}},"113":{"start":{"line":255,"column":16},"end":{"line":255,"column":53}},"114":{"start":{"line":256,"column":16},"end":{"line":256,"column":104}},"115":{"start":{"line":260,"column":16},"end":{"line":260,"column":40}},"116":{"start":{"line":267,"column":8},"end":{"line":267,"column":46}},"117":{"start":{"line":270,"column":6},"end":{"line":270,"column":20}},"118":{"start":{"line":275,"column":21},"end":{"line":300,"column":9}},"119":{"start":{"line":276,"column":8},"end":{"line":299,"column":37}},"120":{"start":{"line":277,"column":10},"end":{"line":298,"column":11}},"121":{"start":{"line":278,"column":12},"end":{"line":297,"column":13}},"122":{"start":{"line":280,"column":16},"end":{"line":280,"column":35}},"123":{"start":{"line":281,"column":16},"end":{"line":281,"column":35}},"124":{"start":{"line":282,"column":16},"end":{"line":284,"column":19}},"125":{"start":{"line":287,"column":16},"end":{"line":287,"column":115}},"126":{"start":{"line":290,"column":16},"end":{"line":290,"column":35}},"127":{"start":{"line":291,"column":16},"end":{"line":291,"column":53}},"128":{"start":{"line":292,"column":16},"end":{"line":292,"column":104}},"129":{"start":{"line":296,"column":16},"end":{"line":296,"column":40}},"130":{"start":{"line":303,"column":8},"end":{"line":303,"column":47}},"131":{"start":{"line":306,"column":6},"end":{"line":306,"column":21}},"132":{"start":{"line":311,"column":21},"end":{"line":343,"column":9}},"133":{"start":{"line":313,"column":8},"end":{"line":342,"column":38}},"134":{"start":{"line":314,"column":10},"end":{"line":341,"column":11}},"135":{"start":{"line":315,"column":12},"end":{"line":340,"column":13}},"136":{"start":{"line":317,"column":16},"end":{"line":317,"column":35}},"137":{"start":{"line":318,"column":16},"end":{"line":318,"column":35}},"138":{"start":{"line":319,"column":16},"end":{"line":321,"column":19}},"139":{"start":{"line":324,"column":16},"end":{"line":324,"column":41}},"140":{"start":{"line":325,"column":16},"end":{"line":325,"column":32}},"141":{"start":{"line":326,"column":16},"end":{"line":326,"column":35}},"142":{"start":{"line":327,"column":16},"end":{"line":327,"column":36}},"143":{"start":{"line":330,"column":16},"end":{"line":330,"column":113}},"144":{"start":{"line":333,"column":16},"end":{"line":333,"column":36}},"145":{"start":{"line":334,"column":16},"end":{"line":334,"column":53}},"146":{"start":{"line":335,"column":16},"end":{"line":335,"column":104}},"147":{"start":{"line":339,"column":16},"end":{"line":339,"column":40}},"148":{"start":{"line":346,"column":8},"end":{"line":346,"column":47}},"149":{"start":{"line":349,"column":6},"end":{"line":349,"column":21}},"150":{"start":{"line":352,"column":2},"end":{"line":352,"column":27}},"151":{"start":{"line":355,"column":15},"end":{"line":355,"column":32}},"152":{"start":{"line":356,"column":0},"end":{"line":356,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":28,"column":37},"end":{"line":28,"column":38}},"loc":{"start":{"line":28,"column":49},"end":{"line":353,"column":1}},"line":28},"1":{"name":"ArticleController","decl":{"start":{"line":29,"column":11},"end":{"line":29,"column":28}},"loc":{"start":{"line":29,"column":31},"end":{"line":31,"column":3}},"line":29},"2":{"name":"(anonymous_2)","decl":{"start":{"line":35,"column":11},"end":{"line":35,"column":12}},"loc":{"start":{"line":35,"column":23},"end":{"line":68,"column":5}},"line":35},"3":{"name":"_callee","decl":{"start":{"line":36,"column":106},"end":{"line":36,"column":113}},"loc":{"start":{"line":36,"column":124},"end":{"line":61,"column":7}},"line":36},"4":{"name":"_callee$","decl":{"start":{"line":38,"column":53},"end":{"line":38,"column":61}},"loc":{"start":{"line":38,"column":72},"end":{"line":60,"column":9}},"line":38},"5":{"name":"index","decl":{"start":{"line":63,"column":15},"end":{"line":63,"column":20}},"loc":{"start":{"line":63,"column":30},"end":{"line":65,"column":7}},"line":63},"6":{"name":"(anonymous_6)","decl":{"start":{"line":71,"column":11},"end":{"line":71,"column":12}},"loc":{"start":{"line":71,"column":23},"end":{"line":142,"column":5}},"line":71},"7":{"name":"_callee2","decl":{"start":{"line":72,"column":106},"end":{"line":72,"column":114}},"loc":{"start":{"line":72,"column":125},"end":{"line":135,"column":7}},"line":72},"8":{"name":"_callee2$","decl":{"start":{"line":75,"column":53},"end":{"line":75,"column":62}},"loc":{"start":{"line":75,"column":74},"end":{"line":134,"column":9}},"line":75},"9":{"name":"store","decl":{"start":{"line":137,"column":15},"end":{"line":137,"column":20}},"loc":{"start":{"line":137,"column":31},"end":{"line":139,"column":7}},"line":137},"10":{"name":"(anonymous_10)","decl":{"start":{"line":145,"column":11},"end":{"line":145,"column":12}},"loc":{"start":{"line":145,"column":23},"end":{"line":194,"column":5}},"line":145},"11":{"name":"_callee3","decl":{"start":{"line":146,"column":105},"end":{"line":146,"column":113}},"loc":{"start":{"line":146,"column":124},"end":{"line":187,"column":7}},"line":146},"12":{"name":"_callee3$","decl":{"start":{"line":148,"column":53},"end":{"line":148,"column":62}},"loc":{"start":{"line":148,"column":74},"end":{"line":186,"column":9}},"line":148},"13":{"name":"show","decl":{"start":{"line":189,"column":15},"end":{"line":189,"column":19}},"loc":{"start":{"line":189,"column":30},"end":{"line":191,"column":7}},"line":189},"14":{"name":"(anonymous_14)","decl":{"start":{"line":197,"column":11},"end":{"line":197,"column":12}},"loc":{"start":{"line":197,"column":23},"end":{"line":271,"column":5}},"line":197},"15":{"name":"_callee4","decl":{"start":{"line":198,"column":107},"end":{"line":198,"column":115}},"loc":{"start":{"line":198,"column":126},"end":{"line":264,"column":7}},"line":198},"16":{"name":"_callee4$","decl":{"start":{"line":201,"column":53},"end":{"line":201,"column":62}},"loc":{"start":{"line":201,"column":74},"end":{"line":263,"column":9}},"line":201},"17":{"name":"update","decl":{"start":{"line":266,"column":15},"end":{"line":266,"column":21}},"loc":{"start":{"line":266,"column":32},"end":{"line":268,"column":7}},"line":266},"18":{"name":"(anonymous_18)","decl":{"start":{"line":274,"column":11},"end":{"line":274,"column":12}},"loc":{"start":{"line":274,"column":23},"end":{"line":307,"column":5}},"line":274},"19":{"name":"_callee5","decl":{"start":{"line":275,"column":108},"end":{"line":275,"column":116}},"loc":{"start":{"line":275,"column":127},"end":{"line":300,"column":7}},"line":275},"20":{"name":"_callee5$","decl":{"start":{"line":276,"column":53},"end":{"line":276,"column":62}},"loc":{"start":{"line":276,"column":74},"end":{"line":299,"column":9}},"line":276},"21":{"name":"destroy","decl":{"start":{"line":302,"column":15},"end":{"line":302,"column":22}},"loc":{"start":{"line":302,"column":34},"end":{"line":304,"column":7}},"line":302},"22":{"name":"(anonymous_22)","decl":{"start":{"line":310,"column":11},"end":{"line":310,"column":12}},"loc":{"start":{"line":310,"column":23},"end":{"line":350,"column":5}},"line":310},"23":{"name":"_callee6","decl":{"start":{"line":311,"column":108},"end":{"line":311,"column":116}},"loc":{"start":{"line":311,"column":127},"end":{"line":343,"column":7}},"line":311},"24":{"name":"_callee6$","decl":{"start":{"line":313,"column":53},"end":{"line":313,"column":62}},"loc":{"start":{"line":313,"column":74},"end":{"line":342,"column":9}},"line":313},"25":{"name":"addLike","decl":{"start":{"line":345,"column":15},"end":{"line":345,"column":22}},"loc":{"start":{"line":345,"column":35},"end":{"line":347,"column":7}},"line":345}},"branchMap":{"0":{"loc":{"start":{"line":40,"column":12},"end":{"line":58,"column":13}},"type":"switch","locations":[{"start":{"line":41,"column":14},"end":{"line":44,"column":50}},{"start":{"line":46,"column":14},"end":{"line":48,"column":112}},{"start":{"line":50,"column":14},"end":{"line":53,"column":98}},{"start":{"line":55,"column":14},"end":{"line":55,"column":22}},{"start":{"line":56,"column":14},"end":{"line":57,"column":39}}],"line":40},"1":{"loc":{"start":{"line":77,"column":12},"end":{"line":132,"column":13}},"type":"switch","locations":[{"start":{"line":78,"column":14},"end":{"line":87,"column":109}},{"start":{"line":89,"column":14},"end":{"line":95,"column":104}},{"start":{"line":97,"column":14},"end":{"line":100,"column":69}},{"start":{"line":102,"column":14},"end":{"line":110,"column":99}},{"start":{"line":112,"column":14},"end":{"line":119,"column":38}},{"start":{"line":121,"column":14},"end":{"line":122,"column":118}},{"start":{"line":124,"column":14},"end":{"line":127,"column":99}},{"start":{"line":129,"column":14},"end":{"line":129,"column":22}},{"start":{"line":130,"column":14},"end":{"line":131,"column":40}}],"line":77},"2":{"loc":{"start":{"line":82,"column":16},"end":{"line":85,"column":17}},"type":"if","locations":[{"start":{"line":82,"column":16},"end":{"line":85,"column":17}},{"start":{"line":82,"column":16},"end":{"line":85,"column":17}}],"line":82},"3":{"loc":{"start":{"line":90,"column":16},"end":{"line":93,"column":17}},"type":"if","locations":[{"start":{"line":90,"column":16},"end":{"line":93,"column":17}},{"start":{"line":90,"column":16},"end":{"line":93,"column":17}}],"line":90},"4":{"loc":{"start":{"line":105,"column":16},"end":{"line":108,"column":17}},"type":"if","locations":[{"start":{"line":105,"column":16},"end":{"line":108,"column":17}},{"start":{"line":105,"column":16},"end":{"line":108,"column":17}}],"line":105},"5":{"loc":{"start":{"line":150,"column":12},"end":{"line":184,"column":13}},"type":"switch","locations":[{"start":{"line":151,"column":14},"end":{"line":156,"column":40}},{"start":{"line":158,"column":14},"end":{"line":166,"column":105}},{"start":{"line":168,"column":14},"end":{"line":171,"column":38}},{"start":{"line":173,"column":14},"end":{"line":174,"column":111}},{"start":{"line":176,"column":14},"end":{"line":179,"column":104}},{"start":{"line":181,"column":14},"end":{"line":181,"column":22}},{"start":{"line":182,"column":14},"end":{"line":183,"column":40}}],"line":150},"6":{"loc":{"start":{"line":161,"column":16},"end":{"line":164,"column":17}},"type":"if","locations":[{"start":{"line":161,"column":16},"end":{"line":164,"column":17}},{"start":{"line":161,"column":16},"end":{"line":164,"column":17}}],"line":161},"7":{"loc":{"start":{"line":203,"column":12},"end":{"line":261,"column":13}},"type":"switch","locations":[{"start":{"line":204,"column":14},"end":{"line":213,"column":109}},{"start":{"line":215,"column":14},"end":{"line":219,"column":19}},{"start":{"line":221,"column":14},"end":{"line":229,"column":105}},{"start":{"line":231,"column":14},"end":{"line":241,"column":78}},{"start":{"line":243,"column":14},"end":{"line":244,"column":47}},{"start":{"line":246,"column":14},"end":{"line":248,"column":38}},{"start":{"line":250,"column":14},"end":{"line":251,"column":118}},{"start":{"line":253,"column":14},"end":{"line":256,"column":104}},{"start":{"line":258,"column":14},"end":{"line":258,"column":22}},{"start":{"line":259,"column":14},"end":{"line":260,"column":40}}],"line":203},"8":{"loc":{"start":{"line":208,"column":16},"end":{"line":211,"column":17}},"type":"if","locations":[{"start":{"line":208,"column":16},"end":{"line":211,"column":17}},{"start":{"line":208,"column":16},"end":{"line":211,"column":17}}],"line":208},"9":{"loc":{"start":{"line":224,"column":16},"end":{"line":227,"column":17}},"type":"if","locations":[{"start":{"line":224,"column":16},"end":{"line":227,"column":17}},{"start":{"line":224,"column":16},"end":{"line":227,"column":17}}],"line":224},"10":{"loc":{"start":{"line":235,"column":16},"end":{"line":238,"column":17}},"type":"if","locations":[{"start":{"line":235,"column":16},"end":{"line":238,"column":17}},{"start":{"line":235,"column":16},"end":{"line":238,"column":17}}],"line":235},"11":{"loc":{"start":{"line":278,"column":12},"end":{"line":297,"column":13}},"type":"switch","locations":[{"start":{"line":279,"column":14},"end":{"line":284,"column":19}},{"start":{"line":286,"column":14},"end":{"line":287,"column":115}},{"start":{"line":289,"column":14},"end":{"line":292,"column":104}},{"start":{"line":294,"column":14},"end":{"line":294,"column":21}},{"start":{"line":295,"column":14},"end":{"line":296,"column":40}}],"line":278},"12":{"loc":{"start":{"line":315,"column":12},"end":{"line":340,"column":13}},"type":"switch","locations":[{"start":{"line":316,"column":14},"end":{"line":321,"column":19}},{"start":{"line":323,"column":14},"end":{"line":327,"column":36}},{"start":{"line":329,"column":14},"end":{"line":330,"column":113}},{"start":{"line":332,"column":14},"end":{"line":335,"column":104}},{"start":{"line":337,"column":14},"end":{"line":337,"column":22}},{"start":{"line":338,"column":14},"end":{"line":339,"column":40}}],"line":315}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":1,"15":1,"16":1,"17":3,"18":3,"19":1,"20":1,"21":1,"22":1,"23":1,"24":0,"25":0,"26":0,"27":1,"28":1,"29":1,"30":1,"31":2,"32":6,"33":9,"34":2,"35":2,"36":2,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":0,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":0,"52":1,"53":1,"54":1,"55":1,"56":0,"57":0,"58":0,"59":2,"60":2,"61":1,"62":1,"63":2,"64":7,"65":8,"66":2,"67":2,"68":2,"69":1,"70":1,"71":1,"72":1,"73":0,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":2,"82":2,"83":1,"84":1,"85":1,"86":5,"87":7,"88":1,"89":1,"90":1,"91":1,"92":1,"93":0,"94":1,"95":1,"96":1,"97":1,"98":1,"99":1,"100":0,"101":1,"102":1,"103":1,"104":0,"105":0,"106":1,"107":1,"108":1,"109":1,"110":1,"111":1,"112":0,"113":0,"114":0,"115":1,"116":1,"117":1,"118":1,"119":2,"120":6,"121":6,"122":2,"123":2,"124":2,"125":1,"126":1,"127":1,"128":1,"129":2,"130":2,"131":1,"132":1,"133":2,"134":7,"135":7,"136":2,"137":2,"138":2,"139":1,"140":1,"141":1,"142":1,"143":1,"144":1,"145":1,"146":1,"147":2,"148":2,"149":1,"150":1,"151":1,"152":1},"f":{"0":1,"1":0,"2":1,"3":1,"4":3,"5":1,"6":1,"7":2,"8":6,"9":2,"10":1,"11":2,"12":7,"13":2,"14":1,"15":1,"16":5,"17":1,"18":1,"19":2,"20":6,"21":2,"22":1,"23":2,"24":7,"25":2},"b":{"0":[1,1,0,0,1],"1":[2,1,1,1,1,1,0,0,2],"2":[1,1],"3":[1,0],"4":[1,0],"5":[2,1,1,1,1,0,2],"6":[1,0],"7":[1,1,1,1,1,1,1,0,0,1],"8":[1,0],"9":[1,0],"10":[0,1],"11":[2,1,1,0,2],"12":[2,1,1,1,0,2]},"inputSourceMap":{"version":3,"sources":["ArticleController.js"],"names":["ArticleController","req","res","Article","find","queries","body","error","details","message","file","path","url","article","title","image","content","save","findOne","_id","params","id","populate","views","deleteOne","likes"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;IAEMA,iB;;;;;;;;kHACiBC,G,EAAKC,G;;;;;;;;uBAGMC,oBAAQC,IAAR,E;;;AAAhBC,gBAAAA,O;iDACC,4BAAaH,GAAb,EAAkB,kBAAlB,EAAsCG,OAAtC,C;;;;;iDAEA,sBAASH,GAAT,EAAc,GAAd,EAAmB,cAAnB,C;;;;;;;;;;;;;;;;;;;mHAIID,G,EAAKC,G;;;;;;;;qCAEA,yBAAkBD,GAAG,CAACK,IAAtB,C,EAATC,K,sBAAAA,K;;qBACHA,K;;;;;kDACO,sBAASL,GAAT,EAAc,GAAd,EAAmBK,KAAK,CAACC,OAAN,CAAc,CAAd,EAAiBC,OAApC,C;;;oBACNR,GAAG,CAACS,I;;;;;kDAAa,sBAASR,GAAT,EAAc,GAAd,EAAmB,mBAAnB,C;;;AAEhBS,gBAAAA,I,GAAOV,GAAG,CAACS,IAAJ,CAASC,I;;uBACJ,wCAAiBA,IAAjB,C;;;AAAZC,gBAAAA,G;;oBACDA,G;;;;;kDACM,sBAASV,GAAT,EAAc,GAAd,EAAmB,cAAnB,C;;;AAELW,gBAAAA,O,GAAU,IAAIV,mBAAJ,CAAY;AACxBW,kBAAAA,KAAK,EAAEb,GAAG,CAACK,IAAJ,CAASQ,KADQ;AAExBC,kBAAAA,KAAK,EAAEH,GAFiB;AAGxBI,kBAAAA,OAAO,EAAEf,GAAG,CAACK,IAAJ,CAASU;AAHM,iBAAZ,C;;uBAKVH,OAAO,CAACI,IAAR,E;;;kDACC,4BAAaf,GAAb,EAAkB,kBAAlB,EAAsCW,OAAtC,EAA+C,GAA/C,C;;;;;kDAEA,sBAASX,GAAT,EAAc,GAAd,EAAmB,cAAnB,C;;;;;;;;;;;;;;;;;;;kHAIGD,G,EAAKC,G;;;;;;;;uBAEOC,oBAAQe,OAAR,CAAgB;AAACC,kBAAAA,GAAG,EAAElB,GAAG,CAACmB,MAAJ,CAAWC;AAAjB,iBAAhB,EAAsCC,QAAtC,CAA+C,UAA/C,C;;;AAAhBT,gBAAAA,O;;oBAEDA,O;;;;;kDAAgB,sBAASX,GAAT,EAAc,GAAd,EAAmB,oBAAnB,C;;;AACrBW,gBAAAA,OAAO,CAACU,KAAR;;uBACMV,OAAO,CAACI,IAAR,E;;;kDACC,4BAAaf,GAAb,EAAkB,gBAAlB,EAAoCW,OAApC,C;;;;;kDAEA,sBAASX,GAAT,EAAc,GAAd,EAAmB,mBAAnB,C;;;;;;;;;;;;;;;;;;;oHAIKD,G,EAAKC,G;;;;;;;;sCAED,yBAAkBD,GAAG,CAACK,IAAtB,C,EAATC,K,uBAAAA,K;;qBACHA,K;;;;;kDACO,sBAASL,GAAT,EAAc,GAAd,EAAmBK,KAAK,CAACC,OAAN,CAAc,CAAd,EAAiBC,OAApC,C;;;;uBAEWN,oBAAQe,OAAR,CAAgB;AAACC,kBAAAA,GAAG,EAAElB,GAAG,CAACmB,MAAJ,CAAWC;AAAjB,iBAAhB,C;;;AAAhBR,gBAAAA,O;;oBACDA,O;;;;;kDAAgB,sBAASX,GAAT,EAAc,GAAd,EAAmB,oBAAnB,C;;;AACjBW,gBAAAA,OAAO,CAACC,KAAR,GAAgBb,GAAG,CAACK,IAAJ,CAASQ,KAAzB;AACAD,gBAAAA,OAAO,CAACG,OAAR,GAAkBf,GAAG,CAACK,IAAJ,CAASU,OAA3B;;qBACGf,GAAG,CAACS,I;;;;;;uBACkB,wCAAiBT,GAAG,CAACS,IAAJ,CAASC,IAA1B,C;;;AAAtBE,gBAAAA,OAAO,CAACE,K;;;;uBAETF,OAAO,CAACI,IAAR,E;;;kDACC,4BAAaf,GAAb,EAAkB,kBAAlB,EAAsCW,OAAtC,EAA+C,GAA/C,C;;;;;kDAGA,sBAASX,GAAT,EAAc,GAAd,EAAmB,mBAAnB,C;;;;;;;;;;;;;;;;;;;qHAIMD,G,EAAKC,G;;;;;;;uBAEZC,oBAAQqB,SAAR,CAAkB;AAACL,kBAAAA,GAAG,EAAElB,GAAG,CAACmB,MAAJ,CAAWC;AAAjB,iBAAlB,C;;;kDACC,4BAAanB,GAAb,EAAkB,kBAAlB,EAAsC,IAAtC,EAA4C,GAA5C,C;;;;;kDAEA,sBAASA,GAAT,EAAc,GAAd,EAAmB,mBAAnB,C;;;;;;;;;;;;;;;;;;;qHAIMD,G,EAAKC,G;;;;;;;;uBAEIC,oBAAQe,OAAR,CAAgB;AAACC,kBAAAA,GAAG,EAAElB,GAAG,CAACmB,MAAJ,CAAWC;AAAjB,iBAAhB,C;;;AAAhBR,gBAAAA,O;AACNA,gBAAAA,OAAO,CAACY,KAAR;;uBACMZ,OAAO,CAACI,I;;;kDACP,4BAAaf,GAAb,EAAkB,aAAlB,EAAiCW,OAAjC,EAA0C,GAA1C,C;;;;;kDAEA,sBAASX,GAAT,EAAc,GAAd,EAAmB,mBAAnB,C;;;;;;;;;;;;;;;;;;;;eAKJF,iB","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/controllers/","sourcesContent":["import {NewError} from \"../utils/errors\";\nimport {JsonResponse} from \"../utils/response\";\nimport Article from \"../models/Article\";\nimport articleValidation from \"../validations/article.validator\";\nimport {cloudinaryUpload} from \"../utils/cloudinary-upload\";\n\nclass ArticleController {\n    static async index(req, res) {\n\n        try {\n            const queries = await Article.find()\n            return JsonResponse(res, \"Listing queries!\", queries)\n        } catch (e) {\n            return NewError(res, 500, \"Server error\")\n        }\n    }\n\n    static async store(req, res) {\n        try {\n            const {error} = articleValidation(req.body);\n            if (error)\n                return NewError(res, 422, error.details[0].message)\n            if (!req.file) return NewError(res, 422, \"Image is required\")\n\n            const path = req.file.path\n            const url = await cloudinaryUpload(path);\n            if (!url)\n                return NewError(res, 500, \"Server error\")\n\n            const article = new Article({\n                title: req.body.title,\n                image: url,\n                content: req.body.content,\n            })\n            await article.save()\n            return JsonResponse(res, \"Article Created!\", article, 201)\n        } catch (e) {\n            return NewError(res, 500, \"Server error\")\n        }\n    }\n\n    static async show(req, res) {\n        try {\n            const article = await Article.findOne({_id: req.params.id}).populate(\"comments\")\n\n            if (!article) return NewError(res, 404, \"Article not found!\")\n            article.views++\n            await article.save()\n            return JsonResponse(res, \"Article found!\", article)\n        } catch (e) {\n            return NewError(res, 404, \"Article not found\")\n        }\n    }\n\n    static async update(req, res) {\n        try {\n            const {error} = articleValidation(req.body);\n            if (error)\n                return NewError(res, 422, error.details[0].message)\n\n            const article = await Article.findOne({_id: req.params.id})\n            if (!article) return NewError(res, 404, \"Article not found!\")\n                article.title = req.body.title\n                article.content = req.body.content\n               if (req.file) {\n                   article.image = await cloudinaryUpload(req.file.path)\n               }\n            await article.save()\n            return JsonResponse(res, \"Article updated!\", article, 200)\n\n        } catch (e) {\n            return NewError(res, 404, \"Article not found\")\n        }\n    }\n\n    static async destroy(req, res) {\n        try {\n            await Article.deleteOne({_id: req.params.id})\n            return JsonResponse(res, \"Article Deleted!\", null, 200)\n        } catch (e) {\n            return NewError(res, 404, \"Article not found\")\n        }\n    }\n\n    static async addLike(req, res) {\n        try {\n            const article = await Article.findOne({_id: req.params.id})\n            article.likes++\n            await article.save\n            return JsonResponse(res, \"Like added!\", article, 200)\n        } catch (e) {\n            return NewError(res, 404, \"Article not found\")\n        }\n    }\n}\n\nexport default ArticleController\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ed660ec2687b4b506b082cf979494bfe78b41549","contentHash":"25d6ab336be9d8b8723956d230551cda4717327b0e2eeed06ac8a55da5a98d68"},"/home/alain/Documents/andela/andelabrand/server/models/Article.js":{"path":"/home/alain/Documents/andela/andelabrand/server/models/Article.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":16},"end":{"line":10,"column":59}},"4":{"start":{"line":12,"column":13},"end":{"line":45,"column":2}},"5":{"start":{"line":47,"column":15},"end":{"line":47,"column":60}},"6":{"start":{"line":49,"column":0},"end":{"line":49,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["Article.js"],"names":["Schema","mongoose","title","type","String","required","image","content","views","Number","likes","comments_count","comments","Types","ObjectID","ref","createdAt","Date","now","model"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAMA,MAAM,GAAGC,qBAASD,MAAT,CAAgB;AAC3BE,EAAAA,KAAK,EAAE;AAACC,IAAAA,IAAI,EAAEC,MAAP;AAAeC,IAAAA,QAAQ,EAAE;AAAzB,GADoB;AAE3BC,EAAAA,KAAK,EAAE;AAACH,IAAAA,IAAI,EAAEC,MAAP;AAAeC,IAAAA,QAAQ,EAAE;AAAzB,GAFoB;AAG3BE,EAAAA,OAAO,EAAE;AAACJ,IAAAA,IAAI,EAAEC,MAAP;AAAeC,IAAAA,QAAQ,EAAE;AAAzB,GAHkB;AAI3BG,EAAAA,KAAK,EAAE;AAACL,IAAAA,IAAI,EAAEM,MAAP;AAAe,eAAS;AAAxB,GAJoB;AAK3BC,EAAAA,KAAK,EAAE;AAACP,IAAAA,IAAI,EAAEM,MAAP;AAAe,eAAS;AAAxB,GALoB;AAM3BE,EAAAA,cAAc,EAAE;AAACR,IAAAA,IAAI,EAAEM,MAAP;AAAe,eAAS;AAAxB,GANW;AAO3BG,EAAAA,QAAQ,EAAE,CAAC;AAACT,IAAAA,IAAI,EAAEF,qBAASD,MAAT,CAAgBa,KAAhB,CAAsBC,QAA7B;AAAuCC,IAAAA,GAAG,EAAE;AAA5C,GAAD,CAPiB;AAQ3BC,EAAAA,SAAS,EAAE;AAACb,IAAAA,IAAI,EAAEc,IAAP;AAAa,eAASA,IAAI,CAACC;AAA3B;AARgB,CAAhB,CAAf;;eAWejB,qBAASkB,KAAT,CAAe,SAAf,EAA0BnB,MAA1B,C","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/models/","sourcesContent":["import mongoose from 'mongoose'\n\nconst Schema = mongoose.Schema({\n    title: {type: String, required: true},\n    image: {type: String, required: true},\n    content: {type: String, required: true},\n    views: {type: Number, default: 0},\n    likes: {type: Number, default: 0},\n    comments_count: {type: Number, default: 0},\n    comments: [{type: mongoose.Schema.Types.ObjectID, ref: \"Comment\"}],\n    createdAt: {type: Date, default: Date.now},\n})\n\nexport default mongoose.model(\"Article\", Schema)"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4cbaaa343cd6076ceae25ffeb63cf20c922f43fe","contentHash":"79e79600fa1cdd59742015fc77326676da29e525d83706e15fbca0197e784fc7"},"/home/alain/Documents/andela/andelabrand/server/validations/article.validator.js":{"path":"/home/alain/Documents/andela/andelabrand/server/validations/article.validator.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":11},"end":{"line":10,"column":49}},"4":{"start":{"line":12,"column":24},"end":{"line":19,"column":1}},"5":{"start":{"line":13,"column":22},"end":{"line":16,"column":4}},"6":{"start":{"line":18,"column":2},"end":{"line":18,"column":38}},"7":{"start":{"line":21,"column":15},"end":{"line":21,"column":32}},"8":{"start":{"line":22,"column":0},"end":{"line":22,"column":30}}},"fnMap":{"0":{"name":"articleValidation","decl":{"start":{"line":12,"column":33},"end":{"line":12,"column":50}},"loc":{"start":{"line":12,"column":57},"end":{"line":19,"column":1}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":3,"6":3,"7":1,"8":1},"f":{"0":3},"b":{},"inputSourceMap":{"version":3,"sources":["article.validator.js"],"names":["articleValidation","body","articleSchema","joi","object","title","string","required","min","max","content","validate"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAMA,iBAAiB,GAAI,SAArBA,iBAAqB,CAACC,IAAD,EAAU;AACjC,MAAMC,aAAa,GAAGC,gBAAIC,MAAJ,CAAW;AAC7BC,IAAAA,KAAK,EAAEF,gBAAIG,MAAJ,GAAaC,QAAb,GAAwBC,GAAxB,CAA4B,CAA5B,EAA+BC,GAA/B,CAAmC,EAAnC,CADsB;AAE7BC,IAAAA,OAAO,EAAEP,gBAAIG,MAAJ,GAAaC,QAAb,GAAwBC,GAAxB,CAA4B,EAA5B;AAFoB,GAAX,CAAtB;;AAIA,SAAON,aAAa,CAACS,QAAd,CAAuBV,IAAvB,CAAP;AACH,CAND;;eAOeD,iB","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/validations/","sourcesContent":["import joi from 'joi'\n\nconst articleValidation =  (body) => {\n    const articleSchema = joi.object({\n        title: joi.string().required().min(3).max(20),\n        content: joi.string().required().min(10),\n    })\n    return articleSchema.validate(body)\n}\nexport default articleValidation"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c08b88bb9e4491789b36996a0642db8dbecdc98a","contentHash":"633c6a407ace32f63e23b1ad0d8c38093d4209cfada0ec5ac142a34cfdbfe1e5"},"/home/alain/Documents/andela/andelabrand/server/utils/cloudinary-upload.js":{"path":"/home/alain/Documents/andela/andelabrand/server/utils/cloudinary-upload.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":34}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":10},"end":{"line":14,"column":47}},"6":{"start":{"line":16,"column":18},"end":{"line":16,"column":73}},"7":{"start":{"line":18,"column":36},"end":{"line":55,"column":3}},"8":{"start":{"line":19,"column":13},"end":{"line":50,"column":5}},"9":{"start":{"line":22,"column":4},"end":{"line":49,"column":16}},"10":{"start":{"line":23,"column":6},"end":{"line":48,"column":7}},"11":{"start":{"line":24,"column":8},"end":{"line":47,"column":9}},"12":{"start":{"line":26,"column":12},"end":{"line":26,"column":54}},"13":{"start":{"line":28,"column":12},"end":{"line":28,"column":56}},"14":{"start":{"line":30,"column":12},"end":{"line":30,"column":30}},"15":{"start":{"line":31,"column":12},"end":{"line":34,"column":15}},"16":{"start":{"line":37,"column":12},"end":{"line":37,"column":50}},"17":{"start":{"line":38,"column":12},"end":{"line":38,"column":44}},"18":{"start":{"line":40,"column":12},"end":{"line":40,"column":44}},"19":{"start":{"line":42,"column":12},"end":{"line":42,"column":50}},"20":{"start":{"line":46,"column":12},"end":{"line":46,"column":35}},"21":{"start":{"line":52,"column":2},"end":{"line":54,"column":4}},"22":{"start":{"line":53,"column":4},"end":{"line":53,"column":39}},"23":{"start":{"line":57,"column":0},"end":{"line":57,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":18,"column":36},"end":{"line":18,"column":37}},"loc":{"start":{"line":18,"column":48},"end":{"line":55,"column":1}},"line":18},"1":{"name":"_callee","decl":{"start":{"line":19,"column":100},"end":{"line":19,"column":107}},"loc":{"start":{"line":19,"column":114},"end":{"line":50,"column":3}},"line":19},"2":{"name":"_callee$","decl":{"start":{"line":22,"column":49},"end":{"line":22,"column":57}},"loc":{"start":{"line":22,"column":68},"end":{"line":49,"column":5}},"line":22},"3":{"name":"cloudinaryUpload","decl":{"start":{"line":52,"column":18},"end":{"line":52,"column":34}},"loc":{"start":{"line":52,"column":39},"end":{"line":54,"column":3}},"line":52}},"branchMap":{"0":{"loc":{"start":{"line":24,"column":8},"end":{"line":47,"column":9}},"type":"switch","locations":[{"start":{"line":25,"column":10},"end":{"line":34,"column":15}},{"start":{"line":36,"column":10},"end":{"line":42,"column":50}},{"start":{"line":44,"column":10},"end":{"line":44,"column":17}},{"start":{"line":45,"column":10},"end":{"line":46,"column":35}}],"line":24}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":3,"10":9,"11":9,"12":3,"13":3,"14":3,"15":3,"16":3,"17":3,"18":3,"19":3,"20":3,"21":1,"22":3,"23":1},"f":{"0":1,"1":3,"2":9,"3":3},"b":{"0":[3,3,0,3]},"inputSourceMap":{"version":3,"sources":["cloudinary-upload.js"],"names":["cloudinaryUpload","path","uniqueFilename","Date","toISOString","folder","process","env","CLOUDINARY_TEST_FOLDER","cloudinary","upload","public_id","tags","url","fs","unlinkSync"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AAEO,IAAMA,gBAAgB;AAAA,2FAAG,iBAAMC,IAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AACtBC,YAAAA,cADsB,GACL,IAAIC,IAAJ,GAAWC,WAAX,EADK,EAE5B;;AACKC,YAAAA,MAHuB,GAGfC,OAAO,CAACC,GAAR,CAAYC,sBAHG,EAI5B;;AAJ4B;AAAA,mBAKJC,uBAAWC,MAAX,CAAkBT,IAAlB,EAAwB;AACxCU,cAAAA,SAAS,YAAKN,MAAL,cAAeH,cAAf,CAD+B;AAExCU,cAAAA,IAAI,EAAEP;AAFkC,aAAxB,CALI;;AAAA;AAAA;AAKjBQ,YAAAA,GALiB,yBAKjBA,GALiB;;AASxBC,2BAAGC,UAAH,CAAcd,IAAd;;AATwB,6CAUjBY,GAViB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAhBb,gBAAgB;AAAA;AAAA;AAAA,GAAtB","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/utils/","sourcesContent":["import fs from \"fs\";\nimport cloudinary from \"../config/cloudinary\";\n\nexport const cloudinaryUpload = async path => {\n    const uniqueFilename = new Date().toISOString()\n    // const folder = process.env.APP_ENV == \"test\" ? process.env.CLOUDINARY_TEST_FOLDER : process.env.CLOUDINARY_PROD_FOLDER\n   const folder= process.env.CLOUDINARY_TEST_FOLDER\n    // try {\n        const {url} = await cloudinary.upload(path, {\n            public_id: `${folder}/${uniqueFilename}`,\n            tags: folder\n        })\n        fs.unlinkSync(path)\n        return url\n    /*} catch (e) {\n\n        return null\n    }*/\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b5775c9fae2531e54dd13d60ea79ab8ad5ec7c31","contentHash":"40432c0e850fca94939d6e0388aa8c30d6a19d24cce183746223581abdb326d7"},"/home/alain/Documents/andela/andelabrand/server/config/cloudinary.js":{"path":"/home/alain/Documents/andela/andelabrand/server/config/cloudinary.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":8,"column":17},"end":{"line":8,"column":41}},"3":{"start":{"line":10,"column":0},"end":{"line":14,"column":3}},"4":{"start":{"line":15,"column":15},"end":{"line":15,"column":34}},"5":{"start":{"line":16,"column":0},"end":{"line":16,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["cloudinary.js"],"names":["cloudinary","require","v2","config","cloud_name","process","env","CLOUDINARY_CLOUD_NAME","api_key","CLOUDINARY_API_KEY","api_secret","CLOUDINARY_API_SECRET","uploader"],"mappings":";;;;;;;AAAA,IAAMA,UAAU,GAAGC,OAAO,CAAC,YAAD,CAAP,CAAsBC,EAAzC;;AAEAF,UAAU,CAACG,MAAX,CAAkB;AACdC,EAAAA,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,qBADV;AAEdC,EAAAA,OAAO,EAAEH,OAAO,CAACC,GAAR,CAAYG,kBAFP;AAGdC,EAAAA,UAAU,EAAEL,OAAO,CAACC,GAAR,CAAYK;AAHV,CAAlB;eAMeX,UAAU,CAACY,Q","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/config/","sourcesContent":["const cloudinary = require(\"cloudinary\").v2\n\ncloudinary.config({\n    cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n    api_key: process.env.CLOUDINARY_API_KEY,\n    api_secret: process.env.CLOUDINARY_API_SECRET,\n});\n\nexport default cloudinary.uploader\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f6154312ef6f715534b50d224c8228e53453acb6","contentHash":"9fc08d8eef18442d1cf3e477e6207dbdc9da0db5220f153d526643814211735b"},"/home/alain/Documents/andela/andelabrand/server/router/comment.routes.js":{"path":"/home/alain/Documents/andela/andelabrand/server/router/comment.routes.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":92}},"5":{"start":{"line":14,"column":13},"end":{"line":14,"column":41}},"6":{"start":{"line":16,"column":0},"end":{"line":16,"column":57}},"7":{"start":{"line":17,"column":15},"end":{"line":17,"column":21}},"8":{"start":{"line":18,"column":0},"end":{"line":18,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["comment.routes.js"],"names":["router","express","Router","post","CommentController","store"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,MAAM,GAAGC,oBAAQC,MAAR,EAAf;;AACCF,MAAM,CAACG,IAAP,CAAY,MAAZ,EAAoBC,8BAAkBC,KAAtC;eACcL,M","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/router/","sourcesContent":["import express from \"express\"\nimport CommentController from \"../controllers/CommentController\";\n\nconst router = express.Router()\n router.post(\"/:id\", CommentController.store)\nexport default router"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"365997ca1ddc8201307dc4066625fd9fdd59d049","contentHash":"d6fc1f6851c296300bbb2ec80b160ed8a8fc6cf8d0f96c5faa720e9b7ab4f623"},"/home/alain/Documents/andela/andelabrand/server/controllers/CommentController.js":{"path":"/home/alain/Documents/andela/andelabrand/server/controllers/CommentController.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":23},"end":{"line":14,"column":95}},"6":{"start":{"line":16,"column":20},"end":{"line":16,"column":89}},"7":{"start":{"line":18,"column":14},"end":{"line":18,"column":40}},"8":{"start":{"line":20,"column":16},"end":{"line":20,"column":44}},"9":{"start":{"line":22,"column":15},"end":{"line":22,"column":82}},"10":{"start":{"line":24,"column":15},"end":{"line":24,"column":67}},"11":{"start":{"line":26,"column":15},"end":{"line":26,"column":67}},"12":{"start":{"line":28,"column":37},"end":{"line":107,"column":3}},"13":{"start":{"line":30,"column":4},"end":{"line":30,"column":62}},"14":{"start":{"line":33,"column":2},"end":{"line":105,"column":6}},"15":{"start":{"line":36,"column":19},"end":{"line":97,"column":9}},"16":{"start":{"line":39,"column":8},"end":{"line":96,"column":37}},"17":{"start":{"line":40,"column":10},"end":{"line":95,"column":11}},"18":{"start":{"line":41,"column":12},"end":{"line":94,"column":13}},"19":{"start":{"line":43,"column":16},"end":{"line":43,"column":34}},"20":{"start":{"line":44,"column":16},"end":{"line":44,"column":34}},"21":{"start":{"line":45,"column":16},"end":{"line":47,"column":19}},"22":{"start":{"line":50,"column":16},"end":{"line":50,"column":40}},"23":{"start":{"line":52,"column":16},"end":{"line":55,"column":17}},"24":{"start":{"line":53,"column":18},"end":{"line":53,"column":36}},"25":{"start":{"line":54,"column":18},"end":{"line":54,"column":24}},"26":{"start":{"line":57,"column":16},"end":{"line":57,"column":104}},"27":{"start":{"line":60,"column":16},"end":{"line":60,"column":106}},"28":{"start":{"line":62,"column":16},"end":{"line":65,"column":17}},"29":{"start":{"line":63,"column":18},"end":{"line":63,"column":36}},"30":{"start":{"line":64,"column":18},"end":{"line":64,"column":24}},"31":{"start":{"line":67,"column":16},"end":{"line":67,"column":108}},"32":{"start":{"line":70,"column":16},"end":{"line":73,"column":19}},"33":{"start":{"line":74,"column":16},"end":{"line":74,"column":35}},"34":{"start":{"line":75,"column":16},"end":{"line":75,"column":38}},"35":{"start":{"line":78,"column":16},"end":{"line":78,"column":47}},"36":{"start":{"line":79,"column":16},"end":{"line":79,"column":41}},"37":{"start":{"line":80,"column":16},"end":{"line":80,"column":35}},"38":{"start":{"line":81,"column":16},"end":{"line":81,"column":38}},"39":{"start":{"line":84,"column":16},"end":{"line":84,"column":114}},"40":{"start":{"line":87,"column":16},"end":{"line":87,"column":35}},"41":{"start":{"line":88,"column":16},"end":{"line":88,"column":51}},"42":{"start":{"line":89,"column":16},"end":{"line":89,"column":103}},"43":{"start":{"line":93,"column":16},"end":{"line":93,"column":39}},"44":{"start":{"line":100,"column":8},"end":{"line":100,"column":45}},"45":{"start":{"line":103,"column":6},"end":{"line":103,"column":19}},"46":{"start":{"line":106,"column":2},"end":{"line":106,"column":27}},"47":{"start":{"line":109,"column":15},"end":{"line":109,"column":32}},"48":{"start":{"line":110,"column":0},"end":{"line":110,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":28,"column":37},"end":{"line":28,"column":38}},"loc":{"start":{"line":28,"column":49},"end":{"line":107,"column":1}},"line":28},"1":{"name":"CommentController","decl":{"start":{"line":29,"column":11},"end":{"line":29,"column":28}},"loc":{"start":{"line":29,"column":31},"end":{"line":31,"column":3}},"line":29},"2":{"name":"(anonymous_2)","decl":{"start":{"line":35,"column":11},"end":{"line":35,"column":12}},"loc":{"start":{"line":35,"column":23},"end":{"line":104,"column":5}},"line":35},"3":{"name":"_callee","decl":{"start":{"line":36,"column":106},"end":{"line":36,"column":113}},"loc":{"start":{"line":36,"column":124},"end":{"line":97,"column":7}},"line":36},"4":{"name":"_callee$","decl":{"start":{"line":39,"column":53},"end":{"line":39,"column":61}},"loc":{"start":{"line":39,"column":72},"end":{"line":96,"column":9}},"line":39},"5":{"name":"store","decl":{"start":{"line":99,"column":15},"end":{"line":99,"column":20}},"loc":{"start":{"line":99,"column":30},"end":{"line":101,"column":7}},"line":99}},"branchMap":{"0":{"loc":{"start":{"line":41,"column":12},"end":{"line":94,"column":13}},"type":"switch","locations":[{"start":{"line":42,"column":14},"end":{"line":47,"column":19}},{"start":{"line":49,"column":14},"end":{"line":57,"column":104}},{"start":{"line":59,"column":14},"end":{"line":67,"column":108}},{"start":{"line":69,"column":14},"end":{"line":75,"column":38}},{"start":{"line":77,"column":14},"end":{"line":81,"column":38}},{"start":{"line":83,"column":14},"end":{"line":84,"column":114}},{"start":{"line":86,"column":14},"end":{"line":89,"column":103}},{"start":{"line":91,"column":14},"end":{"line":91,"column":22}},{"start":{"line":92,"column":14},"end":{"line":93,"column":39}}],"line":41},"1":{"loc":{"start":{"line":52,"column":16},"end":{"line":55,"column":17}},"type":"if","locations":[{"start":{"line":52,"column":16},"end":{"line":55,"column":17}},{"start":{"line":52,"column":16},"end":{"line":55,"column":17}}],"line":52},"2":{"loc":{"start":{"line":62,"column":16},"end":{"line":65,"column":17}},"type":"if","locations":[{"start":{"line":62,"column":16},"end":{"line":65,"column":17}},{"start":{"line":62,"column":16},"end":{"line":65,"column":17}}],"line":62}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":1,"15":1,"16":3,"17":11,"18":14,"19":3,"20":3,"21":3,"22":2,"23":2,"24":2,"25":2,"26":0,"27":2,"28":2,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":3,"44":3,"45":1,"46":1,"47":1,"48":1},"f":{"0":1,"1":0,"2":1,"3":3,"4":11,"5":3},"b":{"0":[3,2,2,1,1,1,1,0,3],"1":[2,0],"2":[1,1]},"inputSourceMap":{"version":3,"sources":["CommentController.js"],"names":["CommentController","req","res","Article","findOne","_id","params","id","article","body","error","details","message","comment","Comment","names","content","save","comments","push","comments_count"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;IAEMA,iB;;;;;;;;kHACiBC,G,EAAKC,G;;;;;;;;;uBAEMC,oBAAQC,OAAR,CAAgB;AAACC,kBAAAA,GAAG,EAAEJ,GAAG,CAACK,MAAJ,CAAWC;AAAjB,iBAAhB,C;;;AAAhBC,gBAAAA,O;;oBACDA,O;;;;;iDAAgB,sBAASN,GAAT,EAAc,GAAd,EAAmB,oBAAnB,C;;;qCAEL,yBAAkBD,GAAG,CAACQ,IAAtB,C,EAATC,K,sBAAAA,K;;qBACHA,K;;;;;iDAEO,sBAASR,GAAT,EAAc,GAAd,EAAmBQ,KAAK,CAACC,OAAN,CAAc,CAAd,EAAiBC,OAApC,C;;;AAGLC,gBAAAA,O,GAAU,IAAIC,mBAAJ,CAAY;AACxBC,kBAAAA,KAAK,EAAEd,GAAG,CAACQ,IAAJ,CAASM,KADQ;AAExBC,kBAAAA,OAAO,EAAEf,GAAG,CAACQ,IAAJ,CAASO;AAFM,iBAAZ,C;;uBAIVH,OAAO,CAACI,IAAR,E;;;AACNT,gBAAAA,OAAO,CAACU,QAAR,CAAiBC,IAAjB,CAAsBN,OAAtB;AACAL,gBAAAA,OAAO,CAACY,cAAR;;uBACMZ,OAAO,CAACS,IAAR,E;;;iDACC,4BAAaf,GAAb,EAAkB,eAAlB,EAAmCW,OAAnC,EAA4C,GAA5C,C;;;;;iDAEA,sBAASX,GAAT,EAAc,GAAd,EAAmB,mBAAnB,C;;;;;;;;;;;;;;;;;;;;eAKJF,iB","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/controllers/","sourcesContent":["import {NewError} from \"../utils/errors\";\nimport {JsonResponse} from \"../utils/response\";\nimport commentValidation from \"../validations/comment.validator\";\nimport Comment from \"../models/Comment\";\nimport Article from \"../models/Article\";\n\nclass CommentController {\n    static async store(req, res) {\n        try {\n            const article = await Article.findOne({_id: req.params.id})\n            if (!article) return NewError(res, 404, \"Article not found!\")\n\n            const {error} = commentValidation(req.body);\n            if (error) {\n\n                return NewError(res, 422, error.details[0].message)\n            }\n\n            const comment = new Comment({\n                names: req.body.names,\n                content: req.body.content,\n            })\n            await comment.save()\n            article.comments.push(comment)\n            article.comments_count++\n            await article.save()\n            return JsonResponse(res, \"Comment added\", comment, 201)\n        } catch (e) {\n            return NewError(res, 404, \"Article not found\")\n        }\n    }\n}\n\nexport default CommentController"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cf60795b8cd03ed7c8c3a02678f03bdec90b006e","contentHash":"26db3745fcda0f223c7d3e814af6c17468861c5bb2976b18526e425f8e7098f6"},"/home/alain/Documents/andela/andelabrand/server/validations/comment.validator.js":{"path":"/home/alain/Documents/andela/andelabrand/server/validations/comment.validator.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":11},"end":{"line":10,"column":49}},"4":{"start":{"line":12,"column":24},"end":{"line":19,"column":1}},"5":{"start":{"line":13,"column":22},"end":{"line":16,"column":4}},"6":{"start":{"line":18,"column":2},"end":{"line":18,"column":38}},"7":{"start":{"line":21,"column":15},"end":{"line":21,"column":32}},"8":{"start":{"line":22,"column":0},"end":{"line":22,"column":30}}},"fnMap":{"0":{"name":"commentValidation","decl":{"start":{"line":12,"column":33},"end":{"line":12,"column":50}},"loc":{"start":{"line":12,"column":57},"end":{"line":19,"column":1}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":2,"7":1,"8":1},"f":{"0":2},"b":{},"inputSourceMap":{"version":3,"sources":["comment.validator.js"],"names":["commentValidation","body","commentSchema","joi","object","names","string","required","min","max","content","validate"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAMA,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,IAAD,EAAU;AAChC,MAAMC,aAAa,GAAGC,gBAAIC,MAAJ,CAAW;AAC7BC,IAAAA,KAAK,EAAEF,gBAAIG,MAAJ,GAAaC,QAAb,GAAwBC,GAAxB,CAA4B,CAA5B,EAA+BC,GAA/B,CAAmC,EAAnC,CADsB;AAE7BC,IAAAA,OAAO,EAAEP,gBAAIG,MAAJ,GAAaC,QAAb,GAAwBC,GAAxB,CAA4B,CAA5B;AAFoB,GAAX,CAAtB;;AAIA,SAAON,aAAa,CAACS,QAAd,CAAuBV,IAAvB,CAAP;AACH,CAND;;eAOeD,iB","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/validations/","sourcesContent":["import joi from 'joi'\n\nconst commentValidation = (body) => {\n    const commentSchema = joi.object({\n        names: joi.string().required().min(3).max(20),\n        content: joi.string().required().min(5),\n    })\n    return commentSchema.validate(body)\n}\nexport default commentValidation"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8fde322370b8ad0e499a7e1eab9db8829af9bbdc","contentHash":"f22b20080ec5c79772e21df4e09df524c35413e4f0e35af0107c07143f06fbf0"},"/home/alain/Documents/andela/andelabrand/server/models/Comment.js":{"path":"/home/alain/Documents/andela/andelabrand/server/models/Comment.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":16},"end":{"line":10,"column":59}},"4":{"start":{"line":12,"column":13},"end":{"line":29,"column":2}},"5":{"start":{"line":31,"column":15},"end":{"line":31,"column":60}},"6":{"start":{"line":33,"column":0},"end":{"line":33,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["Comment.js"],"names":["Schema","mongoose","names","type","String","required","content","article","Types","ObjectId","ref","createdAt","Date","now","model"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAMA,MAAM,GAAGC,qBAASD,MAAT,CAAgB;AAC3BE,EAAAA,KAAK,EAAE;AAACC,IAAAA,IAAI,EAAEC,MAAP;AAAeC,IAAAA,QAAQ,EAAE;AAAzB,GADoB;AAE3BC,EAAAA,OAAO,EAAE;AAACH,IAAAA,IAAI,EAAEC,MAAP;AAAeC,IAAAA,QAAQ,EAAE;AAAzB,GAFkB;AAG3BE,EAAAA,OAAO,EAAE;AAACJ,IAAAA,IAAI,EAAEF,qBAASD,MAAT,CAAgBQ,KAAhB,CAAsBC,QAA7B;AAAuCC,IAAAA,GAAG,EAAE;AAA5C,GAHkB;AAI3BC,EAAAA,SAAS,EAAE;AAACR,IAAAA,IAAI,EAAES,IAAP;AAAa,eAASA,IAAI,CAACC;AAA3B;AAJgB,CAAhB,CAAf;;eAOeZ,qBAASa,KAAT,CAAe,SAAf,EAA0Bd,MAA1B,C","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/models/","sourcesContent":["import mongoose from 'mongoose'\n\nconst Schema = mongoose.Schema({\n    names: {type: String, required: true},\n    content: {type: String, required: true},\n    article: {type: mongoose.Schema.Types.ObjectId, ref: 'Article'},\n    createdAt: {type: Date, default: Date.now},\n})\n\nexport default mongoose.model(\"Comment\", Schema)"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"69741e63d3f798c5e08afdd79f13dde6b05c5952","contentHash":"6efe9d9ab2b55b3ec7cd1f6c9a8ef9f31dc23a0ca8ff0655ef8b136655bd804f"},"/home/alain/Documents/andela/andelabrand/server/router/auth.routes.js":{"path":"/home/alain/Documents/andela/andelabrand/server/router/auth.routes.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"4":{"start":{"line":12,"column":22},"end":{"line":12,"column":86}},"5":{"start":{"line":14,"column":14},"end":{"line":14,"column":46}},"6":{"start":{"line":16,"column":16},"end":{"line":16,"column":59}},"7":{"start":{"line":18,"column":13},"end":{"line":18,"column":41}},"8":{"start":{"line":20,"column":0},"end":{"line":20,"column":103}},"9":{"start":{"line":21,"column":0},"end":{"line":21,"column":56}},"10":{"start":{"line":23,"column":0},"end":{"line":23,"column":102}},"11":{"start":{"line":24,"column":15},"end":{"line":24,"column":21}},"12":{"start":{"line":25,"column":0},"end":{"line":25,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["auth.routes.js"],"names":["router","express","Router","get","passport","AuthController","userDetails","post","login","put","profile"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,IAAMA,MAAM,GAAGC,oBAAQC,MAAR,EAAf;;AACAF,MAAM,CAACG,GAAP,CAAW,OAAX,EAAoB,oBAAOC,oBAAP,CAApB,EAAsCC,2BAAeC,WAArD;AACAN,MAAM,CAACO,IAAP,CAAY,QAAZ,EAAsBF,2BAAeG,KAArC,E,CACA;;AACAR,MAAM,CAACS,GAAP,CAAW,UAAX,EAAuB,oBAAOL,oBAAP,CAAvB,EAAyCC,2BAAeK,OAAxD;eACeV,M","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/router/","sourcesContent":["import express from \"express\"\nimport AuthController from \"../controllers/AuthController\";\nimport {isAuth} from \"../middleware/is-auth\";\nimport passport from \"passport\";\n\nconst router = express.Router()\nrouter.get(\"/user\", isAuth(passport), AuthController.userDetails)\nrouter.post(\"/login\", AuthController.login)\n// router.post(\"/mock\", AuthController.index)\nrouter.put(\"/profile\", isAuth(passport), AuthController.profile)\nexport default router"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"165c1a6584af07cb94f4549959d64458055745b8","contentHash":"9da8845f0c836d2596ab0163aa6f2865f16e5a3a76c3e964c917189d0cd560e8"},"/home/alain/Documents/andela/andelabrand/server/controllers/AuthController.js":{"path":"/home/alain/Documents/andela/andelabrand/server/controllers/AuthController.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":23},"end":{"line":14,"column":95}},"6":{"start":{"line":16,"column":20},"end":{"line":16,"column":89}},"7":{"start":{"line":18,"column":14},"end":{"line":18,"column":40}},"8":{"start":{"line":20,"column":16},"end":{"line":20,"column":44}},"9":{"start":{"line":22,"column":14},"end":{"line":22,"column":55}},"10":{"start":{"line":24,"column":12},"end":{"line":24,"column":61}},"11":{"start":{"line":26,"column":16},"end":{"line":26,"column":44}},"12":{"start":{"line":28,"column":12},"end":{"line":28,"column":52}},"13":{"start":{"line":30,"column":18},"end":{"line":30,"column":73}},"14":{"start":{"line":32,"column":24},"end":{"line":32,"column":61}},"15":{"start":{"line":34,"column":34},"end":{"line":278,"column":3}},"16":{"start":{"line":36,"column":4},"end":{"line":36,"column":59}},"17":{"start":{"line":39,"column":2},"end":{"line":276,"column":6}},"18":{"start":{"line":54,"column":25},"end":{"line":95,"column":9}},"19":{"start":{"line":56,"column":8},"end":{"line":94,"column":36}},"20":{"start":{"line":57,"column":10},"end":{"line":93,"column":11}},"21":{"start":{"line":58,"column":12},"end":{"line":92,"column":13}},"22":{"start":{"line":60,"column":16},"end":{"line":60,"column":34}},"23":{"start":{"line":61,"column":16},"end":{"line":61,"column":34}},"24":{"start":{"line":62,"column":16},"end":{"line":64,"column":19}},"25":{"start":{"line":67,"column":16},"end":{"line":67,"column":37}},"26":{"start":{"line":69,"column":16},"end":{"line":72,"column":17}},"27":{"start":{"line":70,"column":18},"end":{"line":70,"column":36}},"28":{"start":{"line":71,"column":18},"end":{"line":71,"column":24}},"29":{"start":{"line":74,"column":16},"end":{"line":74,"column":100}},"30":{"start":{"line":77,"column":16},"end":{"line":82,"column":20}},"31":{"start":{"line":85,"column":16},"end":{"line":85,"column":34}},"32":{"start":{"line":86,"column":16},"end":{"line":86,"column":51}},"33":{"start":{"line":87,"column":16},"end":{"line":87,"column":100}},"34":{"start":{"line":91,"column":16},"end":{"line":91,"column":39}},"35":{"start":{"line":98,"column":8},"end":{"line":98,"column":51}},"36":{"start":{"line":101,"column":6},"end":{"line":101,"column":25}},"37":{"start":{"line":106,"column":19},"end":{"line":168,"column":9}},"38":{"start":{"line":108,"column":8},"end":{"line":167,"column":38}},"39":{"start":{"line":109,"column":10},"end":{"line":166,"column":11}},"40":{"start":{"line":110,"column":12},"end":{"line":165,"column":13}},"41":{"start":{"line":112,"column":16},"end":{"line":112,"column":35}},"42":{"start":{"line":114,"column":16},"end":{"line":117,"column":17}},"43":{"start":{"line":115,"column":18},"end":{"line":115,"column":37}},"44":{"start":{"line":116,"column":18},"end":{"line":116,"column":24}},"45":{"start":{"line":119,"column":16},"end":{"line":119,"column":118}},"46":{"start":{"line":122,"column":16},"end":{"line":122,"column":35}},"47":{"start":{"line":123,"column":16},"end":{"line":125,"column":19}},"48":{"start":{"line":128,"column":16},"end":{"line":128,"column":38}},"49":{"start":{"line":130,"column":16},"end":{"line":133,"column":17}},"50":{"start":{"line":131,"column":18},"end":{"line":131,"column":37}},"51":{"start":{"line":132,"column":18},"end":{"line":132,"column":24}},"52":{"start":{"line":135,"column":16},"end":{"line":135,"column":106}},"53":{"start":{"line":138,"column":16},"end":{"line":138,"column":36}},"54":{"start":{"line":139,"column":16},"end":{"line":139,"column":84}},"55":{"start":{"line":142,"column":16},"end":{"line":142,"column":49}},"56":{"start":{"line":144,"column":16},"end":{"line":147,"column":17}},"57":{"start":{"line":145,"column":18},"end":{"line":145,"column":38}},"58":{"start":{"line":146,"column":18},"end":{"line":146,"column":24}},"59":{"start":{"line":149,"column":16},"end":{"line":149,"column":106}},"60":{"start":{"line":152,"column":16},"end":{"line":152,"column":59}},"61":{"start":{"line":153,"column":16},"end":{"line":155,"column":20}},"62":{"start":{"line":158,"column":16},"end":{"line":158,"column":36}},"63":{"start":{"line":159,"column":16},"end":{"line":159,"column":53}},"64":{"start":{"line":160,"column":16},"end":{"line":160,"column":101}},"65":{"start":{"line":164,"column":16},"end":{"line":164,"column":40}},"66":{"start":{"line":171,"column":8},"end":{"line":171,"column":45}},"67":{"start":{"line":174,"column":6},"end":{"line":174,"column":19}},"68":{"start":{"line":179,"column":21},"end":{"line":268,"column":9}},"69":{"start":{"line":182,"column":8},"end":{"line":267,"column":38}},"70":{"start":{"line":183,"column":10},"end":{"line":266,"column":11}},"71":{"start":{"line":184,"column":12},"end":{"line":265,"column":13}},"72":{"start":{"line":186,"column":16},"end":{"line":186,"column":35}},"73":{"start":{"line":187,"column":16},"end":{"line":187,"column":35}},"74":{"start":{"line":188,"column":16},"end":{"line":190,"column":19}},"75":{"start":{"line":193,"column":16},"end":{"line":193,"column":38}},"76":{"start":{"line":194,"column":16},"end":{"line":194,"column":101}},"77":{"start":{"line":196,"column":16},"end":{"line":199,"column":17}},"78":{"start":{"line":197,"column":18},"end":{"line":197,"column":37}},"79":{"start":{"line":198,"column":18},"end":{"line":198,"column":24}},"80":{"start":{"line":201,"column":16},"end":{"line":201,"column":109}},"81":{"start":{"line":204,"column":16},"end":{"line":207,"column":17}},"82":{"start":{"line":205,"column":18},"end":{"line":205,"column":38}},"83":{"start":{"line":206,"column":18},"end":{"line":206,"column":24}},"84":{"start":{"line":209,"column":16},"end":{"line":209,"column":36}},"85":{"start":{"line":210,"column":16},"end":{"line":210,"column":88}},"86":{"start":{"line":213,"column":16},"end":{"line":213,"column":50}},"87":{"start":{"line":215,"column":16},"end":{"line":218,"column":17}},"88":{"start":{"line":216,"column":18},"end":{"line":216,"column":38}},"89":{"start":{"line":217,"column":18},"end":{"line":217,"column":24}},"90":{"start":{"line":220,"column":16},"end":{"line":220,"column":119}},"91":{"start":{"line":223,"column":16},"end":{"line":223,"column":36}},"92":{"start":{"line":224,"column":16},"end":{"line":224,"column":70}},"93":{"start":{"line":227,"column":16},"end":{"line":227,"column":47}},"94":{"start":{"line":233,"column":16},"end":{"line":233,"column":42}},"95":{"start":{"line":234,"column":16},"end":{"line":234,"column":44}},"96":{"start":{"line":236,"column":16},"end":{"line":239,"column":17}},"97":{"start":{"line":237,"column":18},"end":{"line":237,"column":38}},"98":{"start":{"line":238,"column":18},"end":{"line":238,"column":24}},"99":{"start":{"line":241,"column":16},"end":{"line":241,"column":37}},"100":{"start":{"line":242,"column":16},"end":{"line":242,"column":36}},"101":{"start":{"line":243,"column":16},"end":{"line":243,"column":69}},"102":{"start":{"line":246,"column":16},"end":{"line":246,"column":44}},"103":{"start":{"line":249,"column":16},"end":{"line":249,"column":36}},"104":{"start":{"line":250,"column":16},"end":{"line":250,"column":35}},"105":{"start":{"line":253,"column":16},"end":{"line":255,"column":20}},"106":{"start":{"line":258,"column":16},"end":{"line":258,"column":36}},"107":{"start":{"line":259,"column":16},"end":{"line":259,"column":53}},"108":{"start":{"line":260,"column":16},"end":{"line":260,"column":101}},"109":{"start":{"line":264,"column":16},"end":{"line":264,"column":40}},"110":{"start":{"line":271,"column":8},"end":{"line":271,"column":47}},"111":{"start":{"line":274,"column":6},"end":{"line":274,"column":21}},"112":{"start":{"line":277,"column":2},"end":{"line":277,"column":24}},"113":{"start":{"line":280,"column":15},"end":{"line":280,"column":29}},"114":{"start":{"line":281,"column":0},"end":{"line":281,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":34,"column":34},"end":{"line":34,"column":35}},"loc":{"start":{"line":34,"column":46},"end":{"line":278,"column":1}},"line":34},"1":{"name":"AuthController","decl":{"start":{"line":35,"column":11},"end":{"line":35,"column":25}},"loc":{"start":{"line":35,"column":28},"end":{"line":37,"column":3}},"line":35},"2":{"name":"(anonymous_2)","decl":{"start":{"line":53,"column":11},"end":{"line":53,"column":12}},"loc":{"start":{"line":53,"column":23},"end":{"line":102,"column":5}},"line":53},"3":{"name":"_callee","decl":{"start":{"line":54,"column":112},"end":{"line":54,"column":119}},"loc":{"start":{"line":54,"column":130},"end":{"line":95,"column":7}},"line":54},"4":{"name":"_callee$","decl":{"start":{"line":56,"column":53},"end":{"line":56,"column":61}},"loc":{"start":{"line":56,"column":72},"end":{"line":94,"column":9}},"line":56},"5":{"name":"userDetails","decl":{"start":{"line":97,"column":15},"end":{"line":97,"column":26}},"loc":{"start":{"line":97,"column":36},"end":{"line":99,"column":7}},"line":97},"6":{"name":"(anonymous_6)","decl":{"start":{"line":105,"column":11},"end":{"line":105,"column":12}},"loc":{"start":{"line":105,"column":23},"end":{"line":175,"column":5}},"line":105},"7":{"name":"_callee2","decl":{"start":{"line":106,"column":106},"end":{"line":106,"column":114}},"loc":{"start":{"line":106,"column":125},"end":{"line":168,"column":7}},"line":106},"8":{"name":"_callee2$","decl":{"start":{"line":108,"column":53},"end":{"line":108,"column":62}},"loc":{"start":{"line":108,"column":74},"end":{"line":167,"column":9}},"line":108},"9":{"name":"login","decl":{"start":{"line":170,"column":15},"end":{"line":170,"column":20}},"loc":{"start":{"line":170,"column":31},"end":{"line":172,"column":7}},"line":170},"10":{"name":"(anonymous_10)","decl":{"start":{"line":178,"column":11},"end":{"line":178,"column":12}},"loc":{"start":{"line":178,"column":23},"end":{"line":275,"column":5}},"line":178},"11":{"name":"_callee3","decl":{"start":{"line":179,"column":108},"end":{"line":179,"column":116}},"loc":{"start":{"line":179,"column":127},"end":{"line":268,"column":7}},"line":179},"12":{"name":"_callee3$","decl":{"start":{"line":182,"column":53},"end":{"line":182,"column":62}},"loc":{"start":{"line":182,"column":74},"end":{"line":267,"column":9}},"line":182},"13":{"name":"profile","decl":{"start":{"line":270,"column":15},"end":{"line":270,"column":22}},"loc":{"start":{"line":270,"column":33},"end":{"line":272,"column":7}},"line":270}},"branchMap":{"0":{"loc":{"start":{"line":58,"column":12},"end":{"line":92,"column":13}},"type":"switch","locations":[{"start":{"line":59,"column":14},"end":{"line":64,"column":19}},{"start":{"line":66,"column":14},"end":{"line":74,"column":100}},{"start":{"line":76,"column":14},"end":{"line":82,"column":20}},{"start":{"line":84,"column":14},"end":{"line":87,"column":100}},{"start":{"line":89,"column":14},"end":{"line":89,"column":22}},{"start":{"line":90,"column":14},"end":{"line":91,"column":39}}],"line":58},"1":{"loc":{"start":{"line":69,"column":16},"end":{"line":72,"column":17}},"type":"if","locations":[{"start":{"line":69,"column":16},"end":{"line":72,"column":17}},{"start":{"line":69,"column":16},"end":{"line":72,"column":17}}],"line":69},"2":{"loc":{"start":{"line":110,"column":12},"end":{"line":165,"column":13}},"type":"switch","locations":[{"start":{"line":111,"column":14},"end":{"line":119,"column":118}},{"start":{"line":121,"column":14},"end":{"line":125,"column":19}},{"start":{"line":127,"column":14},"end":{"line":135,"column":106}},{"start":{"line":137,"column":14},"end":{"line":139,"column":84}},{"start":{"line":141,"column":14},"end":{"line":149,"column":106}},{"start":{"line":151,"column":14},"end":{"line":155,"column":20}},{"start":{"line":157,"column":14},"end":{"line":160,"column":101}},{"start":{"line":162,"column":14},"end":{"line":162,"column":22}},{"start":{"line":163,"column":14},"end":{"line":164,"column":40}}],"line":110},"3":{"loc":{"start":{"line":114,"column":16},"end":{"line":117,"column":17}},"type":"if","locations":[{"start":{"line":114,"column":16},"end":{"line":117,"column":17}},{"start":{"line":114,"column":16},"end":{"line":117,"column":17}}],"line":114},"4":{"loc":{"start":{"line":130,"column":16},"end":{"line":133,"column":17}},"type":"if","locations":[{"start":{"line":130,"column":16},"end":{"line":133,"column":17}},{"start":{"line":130,"column":16},"end":{"line":133,"column":17}}],"line":130},"5":{"loc":{"start":{"line":144,"column":16},"end":{"line":147,"column":17}},"type":"if","locations":[{"start":{"line":144,"column":16},"end":{"line":147,"column":17}},{"start":{"line":144,"column":16},"end":{"line":147,"column":17}}],"line":144},"6":{"loc":{"start":{"line":184,"column":12},"end":{"line":265,"column":13}},"type":"switch","locations":[{"start":{"line":185,"column":14},"end":{"line":190,"column":19}},{"start":{"line":192,"column":14},"end":{"line":201,"column":109}},{"start":{"line":203,"column":14},"end":{"line":210,"column":88}},{"start":{"line":212,"column":14},"end":{"line":220,"column":119}},{"start":{"line":222,"column":14},"end":{"line":224,"column":70}},{"start":{"line":226,"column":14},"end":{"line":227,"column":47}},{"start":{"line":229,"column":14},"end":{"line":243,"column":69}},{"start":{"line":245,"column":14},"end":{"line":246,"column":44}},{"start":{"line":248,"column":14},"end":{"line":250,"column":35}},{"start":{"line":252,"column":14},"end":{"line":255,"column":20}},{"start":{"line":257,"column":14},"end":{"line":260,"column":101}},{"start":{"line":262,"column":14},"end":{"line":262,"column":22}},{"start":{"line":263,"column":14},"end":{"line":264,"column":40}}],"line":184},"7":{"loc":{"start":{"line":196,"column":16},"end":{"line":199,"column":17}},"type":"if","locations":[{"start":{"line":196,"column":16},"end":{"line":199,"column":17}},{"start":{"line":196,"column":16},"end":{"line":199,"column":17}}],"line":196},"8":{"loc":{"start":{"line":204,"column":16},"end":{"line":207,"column":17}},"type":"if","locations":[{"start":{"line":204,"column":16},"end":{"line":207,"column":17}},{"start":{"line":204,"column":16},"end":{"line":207,"column":17}}],"line":204},"9":{"loc":{"start":{"line":204,"column":22},"end":{"line":204,"column":64}},"type":"binary-expr","locations":[{"start":{"line":204,"column":22},"end":{"line":204,"column":43}},{"start":{"line":204,"column":47},"end":{"line":204,"column":64}}],"line":204},"10":{"loc":{"start":{"line":215,"column":16},"end":{"line":218,"column":17}},"type":"if","locations":[{"start":{"line":215,"column":16},"end":{"line":218,"column":17}},{"start":{"line":215,"column":16},"end":{"line":218,"column":17}}],"line":215},"11":{"loc":{"start":{"line":236,"column":16},"end":{"line":239,"column":17}},"type":"if","locations":[{"start":{"line":236,"column":16},"end":{"line":239,"column":17}},{"start":{"line":236,"column":16},"end":{"line":239,"column":17}}],"line":236}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":0,"17":1,"18":1,"19":1,"20":3,"21":4,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":0,"30":1,"31":0,"32":0,"33":0,"34":1,"35":1,"36":1,"37":1,"38":2,"39":7,"40":11,"41":2,"42":2,"43":2,"44":2,"45":0,"46":2,"47":2,"48":2,"49":2,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":0,"60":1,"61":1,"62":0,"63":0,"64":0,"65":2,"66":2,"67":1,"68":1,"69":5,"70":21,"71":29,"72":5,"73":5,"74":5,"75":5,"76":5,"77":5,"78":3,"79":3,"80":2,"81":3,"82":2,"83":2,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":0,"91":1,"92":1,"93":1,"94":3,"95":3,"96":3,"97":2,"98":2,"99":1,"100":1,"101":1,"102":1,"103":3,"104":3,"105":3,"106":0,"107":0,"108":0,"109":5,"110":5,"111":1,"112":1,"113":1,"114":1},"f":{"0":1,"1":0,"2":1,"3":1,"4":3,"5":1,"6":1,"7":2,"8":7,"9":2,"10":1,"11":5,"12":21,"13":5},"b":{"0":[1,1,1,0,0,1],"1":[1,0],"2":[2,2,2,1,1,1,0,0,2],"3":[2,0],"4":[1,1],"5":[1,0],"6":[5,5,3,1,1,1,3,1,3,3,0,0,5],"7":[3,2],"8":[2,1],"9":[3,1],"10":[1,0],"11":[2,1]},"inputSourceMap":{"version":3,"sources":["AuthController.js"],"names":["AuthController","req","res","User","findOne","_id","user","id","name","email","image","body","bcrypt","compare","password","isPasswordValid","token","error","details","message","old_password","oldPasswordValid","hash","file","path","save"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;IAEMA,c;;;;;;;;AACF;;;;;;;;;;;;wHAayBC,G,EAAKC,G;;;;;;;;uBAEHC,iBAAKC,OAAL,CAAa;AAACC,kBAAAA,GAAG,EAAEJ,GAAG,CAACK,IAAJ,CAASC;AAAf,iBAAb,C;;;AAAbD,gBAAAA,I;;oBACDA,I;;;;;iDACM,sBAASJ,GAAT,EAAc,GAAd,EAAmB,gBAAnB,C;;;iDACJ,4BAAaA,GAAb,EAAkB,YAAlB,EAAgC;AACnCG,kBAAAA,GAAG,EAAEC,IAAI,CAACC,EADyB;AAEnCC,kBAAAA,IAAI,EAAEF,IAAI,CAACE,IAFwB;AAGnCC,kBAAAA,KAAK,EAAEH,IAAI,CAACG,KAHuB;AAInCC,kBAAAA,KAAK,EAAEJ,IAAI,CAACI;AAJuB,iBAAhC,C;;;;;iDAOA,sBAASR,GAAT,EAAc,GAAd,EAAmB,gBAAnB,C;;;;;;;;;;;;;;;;;;;mHAIID,G,EAAKC,G;;;;;;;;oBAEXD,GAAG,CAACU,I;;;;;kDAAa,sBAAST,GAAT,EAAc,GAAd,EAAmB,iCAAnB,C;;;;uBACHC,iBAAKC,OAAL,CAAa;AAACK,kBAAAA,KAAK,EAAER,GAAG,CAACU,IAAJ,CAASF;AAAjB,iBAAb,C;;;AAAbH,gBAAAA,I;;oBACDA,I;;;;;kDACM,sBAASJ,GAAT,EAAc,GAAd,EAAmB,qBAAnB,C;;;;uBACmBU,mBAAOC,OAAP,CAAeZ,GAAG,CAACU,IAAJ,CAASG,QAAxB,EAAkCR,IAAI,CAACQ,QAAvC,C;;;AAAxBC,gBAAAA,e;;oBACDA,e;;;;;kDACM,sBAASb,GAAT,EAAc,GAAd,EAAmB,qBAAnB,C;;;AAELc,gBAAAA,K,GAAQ,6BAAcV,IAAd,C;kDACP,4BAAaJ,GAAb,EAAkB,eAAlB,EAAmC;AAACc,kBAAAA,KAAK,EAALA;AAAD,iBAAnC,C;;;;;kDAEA,sBAASd,GAAT,EAAc,GAAd,EAAmB,gBAAnB,C;;;;;;;;;;;;;;;;;;;qHAIMD,G,EAAKC,G;;;;;;;;;uBAECC,iBAAKC,OAAL,CAAa;AAACC,kBAAAA,GAAG,EAAEJ,GAAG,CAACK,IAAJ,CAASC;AAAf,iBAAb,C;;;AAAbD,gBAAAA,I;kCACU,0BAAeL,GAAG,CAACU,IAAnB,C,EAATM,K,mBAAAA,K;;qBACHA,K;;;;;kDACO,sBAASf,GAAT,EAAc,GAAd,EAAmBe,KAAK,CAACC,OAAN,CAAc,CAAd,EAAiBC,OAApC,C;;;sBAEPlB,GAAG,CAACU,IAAJ,CAASS,YAAT,IAAyBnB,GAAG,CAACU,IAAJ,CAASG,Q;;;;;;uBACHF,mBAAOC,OAAP,CAAeZ,GAAG,CAACU,IAAJ,CAASS,YAAxB,EAAsCd,IAAI,CAACQ,QAA3C,C;;;AAAzBO,gBAAAA,gB;;oBACDA,gB;;;;;kDACM,sBAASnB,GAAT,EAAc,GAAd,EAAmB,kCAAnB,C;;;;uBAEWU,mBAAOU,IAAP,CAAYrB,GAAG,CAACU,IAAJ,CAASG,QAArB,EAA+B,EAA/B,C;;;AAAtBR,gBAAAA,IAAI,CAACQ,Q;;;AAElB;;;AAISR,gBAAAA,IAAI,CAACE,IAAL,GAAYP,GAAG,CAACU,IAAJ,CAASH,IAArB;AACAF,gBAAAA,IAAI,CAACG,KAAL,GAAaR,GAAG,CAACU,IAAJ,CAASF,KAAtB;;qBACIR,GAAG,CAACsB,I;;;;;AACEC,gBAAAA,I,GAAOvB,GAAG,CAACsB,IAAJ,CAASC,I;;uBACH,wCAAiBA,IAAjB,C;;;AAAnBlB,gBAAAA,IAAI,CAACI,K;;;;uBAEHJ,IAAI,CAACmB,IAAL,E;;;kDACC,4BAAavB,GAAb,EAAkB,+BAAlB,EAAmD;AAACI,kBAAAA,IAAI,EAAJA;AAAD,iBAAnD,C;;;;;kDAEA,sBAASJ,GAAT,EAAc,GAAd,EAAmB,gBAAnB,C;;;;;;;;;;;;;;;;;;;;eAKJF,c","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/controllers/","sourcesContent":["import {NewError} from \"../utils/errors\";\nimport {JsonResponse} from \"../utils/response\";\nimport bcrypt from \"bcrypt\";\nimport User from \"../models/User\";\nimport {generateToken} from \"../utils/passport\";\nimport {userValidation} from \"../validations/user.validator\";\nimport cloudinary from \"../config/cloudinary\";\nimport {cloudinaryUpload} from \"../utils/cloudinary-upload\";\n\nclass AuthController {\n    /*   static async index(req, res) {\n           const encryptedPassword = await bcrypt.hash(req.body.password, 12)\n\n           const user = new User({\n               name: req.body.name,\n               email: req.body.email,\n               image: 'https://res.cloudinary.com/alainmucyo/image/upload/v1600252935/blog/user_yndsrs.png',\n               password: encryptedPassword\n           })\n           await user.save()\n           res.status(201).send(user)\n       }*/\n\n    static async userDetails(req, res) {\n        try {\n            const user = await User.findOne({_id: req.user.id})\n            if (!user)\n                return NewError(res, 404, \"User not found\")\n            return JsonResponse(res, \"User found\", {\n                _id: user.id,\n                name: user.name,\n                email: user.email,\n                image: user.image\n            })\n        } catch (e) {\n            return NewError(res, 500, \"Error occurred\")\n        }\n    }\n\n    static async login(req, res) {\n        try {\n            if (!req.body) return NewError(res, 422, \"Email and password are required\")\n            const user = await User.findOne({email: req.body.email})\n            if (!user)\n                return NewError(res, 422, \"Invalid credentials\")\n            const isPasswordValid = await bcrypt.compare(req.body.password, user.password)\n            if (!isPasswordValid)\n                return NewError(res, 422, \"Invalid credentials\")\n\n            const token = generateToken(user);\n            return JsonResponse(res, \"Login succeed\", {token})\n        } catch (e) {\n            return NewError(res, 500, \"Error occurred\")\n        }\n    }\n\n    static async profile(req, res) {\n        try {\n            const user = await User.findOne({_id: req.user.id})\n            const {error} = userValidation(req.body)\n            if (error)\n                return NewError(res, 422, error.details[0].message)\n\n            if (req.body.old_password && req.body.password) {\n                const oldPasswordValid = await bcrypt.compare(req.body.old_password, user.password)\n                if (!oldPasswordValid)\n                    return NewError(res, 422, \"Invalid old password credentials\")\n\n                user.password = await bcrypt.hash(req.body.password, 12)\n            }\n   /*         const userExists = await User.findOne({email: req.body.email, _id: {$ne: user._id}})\n            if (userExists)\n                return NewError(res, 422, \"Email has already been taken\")*/\n\n            user.name = req.body.name\n            user.email = req.body.email\n            if (req.file) {\n                const path = req.file.path\n                user.image = await cloudinaryUpload(path)\n            }\n            await user.save()\n            return JsonResponse(res, \"Profile updated successfully!\", {user})\n        } catch (e) {\n            return NewError(res, 500, \"Error occurred\")\n        }\n    }\n}\n\nexport default AuthController"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"360f020b4f66ac7a577a520e763bc0c1ce6b76d8","contentHash":"55231f3e5da7e9b2cdb7a4514e7b9908c574ca90477a34339336066a7d8ecb62"},"/home/alain/Documents/andela/andelabrand/server/models/User.js":{"path":"/home/alain/Documents/andela/andelabrand/server/models/User.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":16},"end":{"line":10,"column":59}},"4":{"start":{"line":12,"column":13},"end":{"line":34,"column":2}},"5":{"start":{"line":36,"column":15},"end":{"line":36,"column":57}},"6":{"start":{"line":38,"column":0},"end":{"line":38,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["User.js"],"names":["Schema","mongoose","name","type","String","required","email","unique","image","password","createdAt","Date","now","model"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAMA,MAAM,GAAGC,qBAASD,MAAT,CAAgB;AAC3BE,EAAAA,IAAI,EAAE;AAACC,IAAAA,IAAI,EAAEC,MAAP;AAAeC,IAAAA,QAAQ,EAAE;AAAzB,GADqB;AAE3BC,EAAAA,KAAK,EAAE;AAACH,IAAAA,IAAI,EAAEC,MAAP;AAAeC,IAAAA,QAAQ,EAAE,IAAzB;AAA+BE,IAAAA,MAAM,EAAE;AAAvC,GAFoB;AAG3BC,EAAAA,KAAK,EAAE;AAACL,IAAAA,IAAI,EAAEC,MAAP;AAAeC,IAAAA,QAAQ,EAAE;AAAzB,GAHoB;AAI3BI,EAAAA,QAAQ,EAAE;AAACN,IAAAA,IAAI,EAAEC,MAAP;AAAeC,IAAAA,QAAQ,EAAE;AAAzB,GAJiB;AAK3BK,EAAAA,SAAS,EAAE;AAACP,IAAAA,IAAI,EAAEQ,IAAP;AAAa,eAASA,IAAI,CAACC;AAA3B;AALgB,CAAhB,CAAf;;eAQeX,qBAASY,KAAT,CAAe,MAAf,EAAuBb,MAAvB,C","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/models/","sourcesContent":["import mongoose from 'mongoose'\n\nconst Schema = mongoose.Schema({\n    name: {type: String, required: true},\n    email: {type: String, required: true, unique: true},\n    image: {type: String, required: true},\n    password: {type: String, required: true},\n    createdAt: {type: Date, default: Date.now},\n})\n\nexport default mongoose.model(\"User\", Schema)"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f0ec6022b1d01af0c9fe6234c47f2c76dbfa60e0","contentHash":"d152fc14d75996b73e7589666dcc75a42d394f387cc8179f4c9f291ce4b9225d"},"/home/alain/Documents/andela/andelabrand/server/utils/passport.js":{"path":"/home/alain/Documents/andela/andelabrand/server/utils/passport.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":31}},"3":{"start":{"line":10,"column":20},"end":{"line":10,"column":67}},"4":{"start":{"line":12,"column":20},"end":{"line":22,"column":1}},"5":{"start":{"line":13,"column":18},"end":{"line":13,"column":22}},"6":{"start":{"line":14,"column":16},"end":{"line":18,"column":3}},"7":{"start":{"line":19,"column":2},"end":{"line":21,"column":5}},"8":{"start":{"line":24,"column":0},"end":{"line":24,"column":38}}},"fnMap":{"0":{"name":"generateToken","decl":{"start":{"line":12,"column":29},"end":{"line":12,"column":42}},"loc":{"start":{"line":12,"column":49},"end":{"line":22,"column":1}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":4,"6":4,"7":4,"8":1},"f":{"0":4},"b":{},"inputSourceMap":{"version":3,"sources":["passport.js"],"names":["generateToken","user","expiresIn","payload","name","email","userId","_id","jwt","sign","process","env","JWT_SECRET"],"mappings":";;;;;;;;;AAAA;;AACO,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,CAAAC,IAAI,EAAI;AACjC,MAAMC,SAAS,GAAG,IAAlB;AACA,MAAMC,OAAO,GAAG;AACZC,IAAAA,IAAI,EAAEH,IAAI,CAACG,IADC;AAEZC,IAAAA,KAAK,EAAEJ,IAAI,CAACI,KAFA;AAGZC,IAAAA,MAAM,EAAEL,IAAI,CAACM;AAHD,GAAhB;AAKA,SAAOC,yBAAIC,IAAJ,CAASN,OAAT,EAAkBO,OAAO,CAACC,GAAR,CAAYC,UAA9B,EAA0C;AAACV,IAAAA,SAAS,EAAEA;AAAZ,GAA1C,CAAP;AACH,CARM","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/utils/","sourcesContent":["import jwt from 'jsonwebtoken';\nexport const generateToken = user => {\n    const expiresIn = '1d';\n    const payload = {\n        name: user.name,\n        email: user.email,\n        userId: user._id\n    }\n    return jwt.sign(payload, process.env.JWT_SECRET, {expiresIn: expiresIn});\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cf32c6644c19a65fa3ca46f4574b6b89699ea50c","contentHash":"2df03e4c1cfd2f90eb6b85d66ec2912a690d5d83a7796eb40b1da5510e2b36b4"},"/home/alain/Documents/andela/andelabrand/server/validations/user.validator.js":{"path":"/home/alain/Documents/andela/andelabrand/server/validations/user.validator.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":32}},"3":{"start":{"line":10,"column":11},"end":{"line":10,"column":49}},"4":{"start":{"line":12,"column":21},"end":{"line":21,"column":1}},"5":{"start":{"line":13,"column":19},"end":{"line":18,"column":4}},"6":{"start":{"line":20,"column":2},"end":{"line":20,"column":35}},"7":{"start":{"line":23,"column":0},"end":{"line":23,"column":40}}},"fnMap":{"0":{"name":"userValidation","decl":{"start":{"line":12,"column":30},"end":{"line":12,"column":44}},"loc":{"start":{"line":12,"column":51},"end":{"line":21,"column":1}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":5,"6":5,"7":1},"f":{"0":5},"b":{},"inputSourceMap":{"version":3,"sources":["user.validator.js"],"names":["userValidation","body","userSchema","joi","object","name","string","required","min","max","email","password","old_password","validate"],"mappings":";;;;;;;;;AAAA;;AAEO,IAAMA,cAAc,GAAG,SAAjBA,cAAiB,CAACC,IAAD,EAAU;AACpC,MAAMC,UAAU,GAAGC,gBAAIC,MAAJ,CAAW;AAC1BC,IAAAA,IAAI,EAAEF,gBAAIG,MAAJ,GAAaC,QAAb,GAAwBC,GAAxB,CAA4B,CAA5B,EAA+BC,GAA/B,CAAmC,EAAnC,CADoB;AAE1BC,IAAAA,KAAK,EAAEP,gBAAIG,MAAJ,GAAaI,KAAb,GAAqBH,QAArB,EAFmB;AAG1BI,IAAAA,QAAQ,EAAER,gBAAIG,MAAJ,GAAaE,GAAb,CAAiB,CAAjB,CAHgB;AAI1BI,IAAAA,YAAY,EAAET,gBAAIG,MAAJ;AAJY,GAAX,CAAnB;;AAMA,SAAOJ,UAAU,CAACW,QAAX,CAAoBZ,IAApB,CAAP;AACH,CARM","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/validations/","sourcesContent":["import joi from 'joi'\n\nexport const userValidation = (body) => {\n    const userSchema = joi.object({\n        name: joi.string().required().min(3).max(20),\n        email: joi.string().email().required(),\n        password: joi.string().min(6),\n        old_password: joi.string()\n    })\n    return userSchema.validate(body)\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e0c7d8db743478d80362727a0ad8eee9984eb23b","contentHash":"cae65d2c0dbbe2fea05a6dd82b36fdceb0b3cdcb1efc3987e6fd58ed423dc6c4"},"/home/alain/Documents/andela/andelabrand/server/router/admin.routes.js":{"path":"/home/alain/Documents/andela/andelabrand/server/router/admin.routes.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"4":{"start":{"line":12,"column":14},"end":{"line":12,"column":46}},"5":{"start":{"line":14,"column":16},"end":{"line":14,"column":59}},"6":{"start":{"line":16,"column":23},"end":{"line":16,"column":88}},"7":{"start":{"line":18,"column":13},"end":{"line":18,"column":41}},"8":{"start":{"line":20,"column":0},"end":{"line":20,"column":103}},"9":{"start":{"line":21,"column":15},"end":{"line":21,"column":21}},"10":{"start":{"line":22,"column":0},"end":{"line":22,"column":30}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["admin.routes.js"],"names":["router","express","Router","get","passport","AdminController","reports"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,IAAMA,MAAM,GAAGC,oBAAQC,MAAR,EAAf;;AACAF,MAAM,CAACG,GAAP,CAAW,UAAX,EAAuB,oBAAOC,oBAAP,CAAvB,EAAyCC,4BAAgBC,OAAzD;eACeN,M","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/router/","sourcesContent":["import express from \"express\"\nimport {isAuth} from \"../middleware/is-auth\";\nimport passport from \"passport\";\nimport AdminController from \"../controllers/AdminController\";\n\nconst router = express.Router()\nrouter.get(\"/reports\", isAuth(passport), AdminController.reports)\nexport default router"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5abf0264fa0515e4b1da90c7b9e29ca5b9320741","contentHash":"de8dd90e4e957f039a9f5ee411598269388528386d7dfa8a2c2a7e0aa194cb16"},"/home/alain/Documents/andela/andelabrand/server/controllers/AdminController.js":{"path":"/home/alain/Documents/andela/andelabrand/server/controllers/AdminController.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":23},"end":{"line":14,"column":95}},"6":{"start":{"line":16,"column":20},"end":{"line":16,"column":89}},"7":{"start":{"line":18,"column":14},"end":{"line":18,"column":40}},"8":{"start":{"line":20,"column":16},"end":{"line":20,"column":44}},"9":{"start":{"line":22,"column":15},"end":{"line":22,"column":67}},"10":{"start":{"line":24,"column":13},"end":{"line":24,"column":63}},"11":{"start":{"line":26,"column":35},"end":{"line":98,"column":3}},"12":{"start":{"line":28,"column":4},"end":{"line":28,"column":60}},"13":{"start":{"line":31,"column":2},"end":{"line":96,"column":6}},"14":{"start":{"line":34,"column":21},"end":{"line":88,"column":9}},"15":{"start":{"line":36,"column":8},"end":{"line":87,"column":37}},"16":{"start":{"line":37,"column":10},"end":{"line":86,"column":11}},"17":{"start":{"line":38,"column":12},"end":{"line":85,"column":13}},"18":{"start":{"line":40,"column":16},"end":{"line":40,"column":34}},"19":{"start":{"line":41,"column":16},"end":{"line":41,"column":34}},"20":{"start":{"line":42,"column":16},"end":{"line":42,"column":60}},"21":{"start":{"line":45,"column":16},"end":{"line":45,"column":41}},"22":{"start":{"line":46,"column":16},"end":{"line":46,"column":34}},"23":{"start":{"line":47,"column":16},"end":{"line":47,"column":58}},"24":{"start":{"line":50,"column":16},"end":{"line":50,"column":40}},"25":{"start":{"line":51,"column":16},"end":{"line":51,"column":34}},"26":{"start":{"line":52,"column":16},"end":{"line":65,"column":20}},"27":{"start":{"line":68,"column":16},"end":{"line":68,"column":38}},"28":{"start":{"line":69,"column":16},"end":{"line":75,"column":20}},"29":{"start":{"line":78,"column":16},"end":{"line":78,"column":35}},"30":{"start":{"line":79,"column":16},"end":{"line":79,"column":51}},"31":{"start":{"line":80,"column":16},"end":{"line":80,"column":103}},"32":{"start":{"line":84,"column":16},"end":{"line":84,"column":39}},"33":{"start":{"line":91,"column":8},"end":{"line":91,"column":47}},"34":{"start":{"line":94,"column":6},"end":{"line":94,"column":21}},"35":{"start":{"line":97,"column":2},"end":{"line":97,"column":25}},"36":{"start":{"line":100,"column":15},"end":{"line":100,"column":30}},"37":{"start":{"line":101,"column":0},"end":{"line":101,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":26,"column":35},"end":{"line":26,"column":36}},"loc":{"start":{"line":26,"column":47},"end":{"line":98,"column":1}},"line":26},"1":{"name":"AdminController","decl":{"start":{"line":27,"column":11},"end":{"line":27,"column":26}},"loc":{"start":{"line":27,"column":29},"end":{"line":29,"column":3}},"line":27},"2":{"name":"(anonymous_2)","decl":{"start":{"line":33,"column":11},"end":{"line":33,"column":12}},"loc":{"start":{"line":33,"column":23},"end":{"line":95,"column":5}},"line":33},"3":{"name":"_callee","decl":{"start":{"line":34,"column":108},"end":{"line":34,"column":115}},"loc":{"start":{"line":34,"column":126},"end":{"line":88,"column":7}},"line":34},"4":{"name":"_callee$","decl":{"start":{"line":36,"column":53},"end":{"line":36,"column":61}},"loc":{"start":{"line":36,"column":72},"end":{"line":87,"column":9}},"line":36},"5":{"name":"reports","decl":{"start":{"line":90,"column":15},"end":{"line":90,"column":22}},"loc":{"start":{"line":90,"column":32},"end":{"line":92,"column":7}},"line":90}},"branchMap":{"0":{"loc":{"start":{"line":38,"column":12},"end":{"line":85,"column":13}},"type":"switch","locations":[{"start":{"line":39,"column":14},"end":{"line":42,"column":60}},{"start":{"line":44,"column":14},"end":{"line":47,"column":58}},{"start":{"line":49,"column":14},"end":{"line":65,"column":20}},{"start":{"line":67,"column":14},"end":{"line":75,"column":20}},{"start":{"line":77,"column":14},"end":{"line":80,"column":103}},{"start":{"line":82,"column":14},"end":{"line":82,"column":22}},{"start":{"line":83,"column":14},"end":{"line":84,"column":39}}],"line":38}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":1,"14":1,"15":1,"16":5,"17":5,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":0,"30":0,"31":0,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1},"f":{"0":1,"1":0,"2":1,"3":1,"4":5,"5":1},"b":{"0":[1,1,1,1,0,0,1]},"inputSourceMap":{"version":3,"sources":["AdminController.js"],"names":["AdminController","req","res","Article","countDocuments","articles","Query","queries","aggregate","$group","_id","views","$sum","likes","comments","group"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;IAEMA,e;;;;;;;;oHACmBC,G,EAAKC,G;;;;;;;;uBAEKC,oBAAQC,cAAR,E;;;AAAjBC,gBAAAA,Q;;uBACgBC,kBAAMF,cAAN,E;;;AAAhBG,gBAAAA,O;;uBACcJ,oBAAQK,SAAR,CAAkB,CAAC;AACnCC,kBAAAA,MAAM,EAAE;AACJC,oBAAAA,GAAG,EAAE,IADD;AAEJC,oBAAAA,KAAK,EAAE;AAACC,sBAAAA,IAAI,EAAE;AAAP,qBAFH;AAGJC,oBAAAA,KAAK,EAAE;AAACD,sBAAAA,IAAI,EAAE;AAAP,qBAHH;AAIJE,oBAAAA,QAAQ,EAAE;AAACF,sBAAAA,IAAI,EAAE;AAAP;AAJN;AAD2B,iBAAD,CAAlB,C;;;AAAdG,gBAAAA,K;iDASC,4BAAab,GAAb,EAAkB,kBAAlB,EAAsC;AACzCG,kBAAAA,QAAQ,EAAEA,QAD+B;AAEzCE,kBAAAA,OAAO,EAAEA,OAFgC;AAGzCI,kBAAAA,KAAK,EAAEI,KAAK,CAAC,CAAD,CAAL,CAASJ,KAHyB;AAIzCE,kBAAAA,KAAK,EAAEE,KAAK,CAAC,CAAD,CAAL,CAASF,KAJyB;AAKzCC,kBAAAA,QAAQ,EAAEC,KAAK,CAAC,CAAD,CAAL,CAASD;AALsB,iBAAtC,C;;;;;iDASA,sBAASZ,GAAT,EAAc,GAAd,EAAmB,mBAAnB,C;;;;;;;;;;;;;;;;;;;;eAKJF,e","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/controllers/","sourcesContent":["import {NewError} from \"../utils/errors\";\nimport {JsonResponse} from \"../utils/response\";\nimport Article from \"../models/Article\";\nimport Query from \"../models/Query\";\n\nclass AdminController {\n    static async reports(req, res) {\n        try {\n            const articles = await Article.countDocuments()\n            const queries = await Query.countDocuments()\n            const group = await Article.aggregate([{\n                $group: {\n                    _id: null,\n                    views: {$sum: \"$views\"},\n                    likes: {$sum: \"$likes\"},\n                    comments: {$sum: \"$comments_count\"}\n                }\n            }])\n\n            return JsonResponse(res, \"Admin statistics\", {\n                articles: articles,\n                queries: queries,\n                views: group[0].views,\n                likes: group[0].likes,\n                comments: group[0].comments\n            })\n        } catch (e) {\n\n            return NewError(res, 404, \"Article not found\")\n        }\n    }\n}\n\nexport default AdminController"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"648e4f74b001f3a2b5bee11928a5f0e6a2bb6a6c","contentHash":"68017f02a970219c200a7a13207fdf881bccde8b159e765e9aed609dc1268bde"},"/home/alain/Documents/andela/andelabrand/server/utils/file-uploader.js":{"path":"/home/alain/Documents/andela/andelabrand/server/utils/file-uploader.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":24}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":55}},"4":{"start":{"line":12,"column":14},"end":{"line":20,"column":2}},"5":{"start":{"line":14,"column":4},"end":{"line":14,"column":32}},"6":{"start":{"line":17,"column":15},"end":{"line":17,"column":54}},"7":{"start":{"line":18,"column":4},"end":{"line":18,"column":39}},"8":{"start":{"line":22,"column":13},"end":{"line":24,"column":2}},"9":{"start":{"line":25,"column":0},"end":{"line":25,"column":24}}},"fnMap":{"0":{"name":"destination","decl":{"start":{"line":13,"column":24},"end":{"line":13,"column":35}},"loc":{"start":{"line":13,"column":51},"end":{"line":15,"column":3}},"line":13},"1":{"name":"filename","decl":{"start":{"line":16,"column":21},"end":{"line":16,"column":29}},"loc":{"start":{"line":16,"column":45},"end":{"line":19,"column":3}},"line":16}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":3,"6":3,"7":3,"8":1,"9":1},"f":{"0":3,"1":3},"b":{},"inputSourceMap":{"version":3,"sources":["file-uploader.js"],"names":["storage","multer","diskStorage","destination","req","file","cb","filename","rand","Math","random","toString","substring","originalname","upload"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAMA,OAAO,GAAGC,mBAAOC,WAAP,CAAmB;AAC/BC,EAAAA,WAAW,EAAE,qBAAUC,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AAClCA,IAAAA,EAAE,CAAC,IAAD,EAAO,iBAAP,CAAF;AACH,GAH8B;AAI/BC,EAAAA,QAAQ,EAAE,kBAAUH,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AAC/B,QAAIE,IAAI,GAAGC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,SAA3B,CAAqC,CAArC,CAAX;AACAN,IAAAA,EAAE,CAAC,IAAD,EAAOE,IAAI,GAAGH,IAAI,CAACQ,YAAnB,CAAF;AACH;AAP8B,CAAnB,CAAhB;;AAUO,IAAMC,MAAM,GAAG,wBAAO;AAACd,EAAAA,OAAO,EAAPA;AAAD,CAAP,CAAf","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/utils/","sourcesContent":["import multer from \"multer\";\n\nconst storage = multer.diskStorage({\n    destination: function (req, file, cb) {\n        cb(null, 'storage/images/');\n    },\n    filename: function (req, file, cb) {\n        let rand = Math.random().toString(36).substring(7);\n        cb(null, rand + file.originalname);\n    }\n});\n\nexport const upload = multer({storage})"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9861fb2150f37389bc6d108010d34f118149f35c","contentHash":"90314f65221bede9c7a8347f1f47caa0a3a9f4e44c4a281822490fd1dde42320"},"/home/alain/Documents/andela/andelabrand/server/config/passport.js":{"path":"/home/alain/Documents/andela/andelabrand/server/config/passport.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":29}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":66}},"4":{"start":{"line":12,"column":18},"end":{"line":12,"column":50}},"5":{"start":{"line":13,"column":17},"end":{"line":13,"column":51}},"6":{"start":{"line":14,"column":14},"end":{"line":17,"column":1}},"7":{"start":{"line":18,"column":18},"end":{"line":22,"column":2}},"8":{"start":{"line":19,"column":2},"end":{"line":21,"column":5}},"9":{"start":{"line":23,"column":0},"end":{"line":23,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":18,"column":43},"end":{"line":18,"column":44}},"loc":{"start":{"line":18,"column":68},"end":{"line":22,"column":1}},"line":18}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":13,"9":1},"f":{"0":13},"b":{},"inputSourceMap":{"version":3,"sources":["passport.js"],"names":["JwtStrategy","passportJwt","Strategy","ExtractJwt","options","jwtFromRequest","fromAuthHeaderAsBearerToken","secretOrKey","process","env","JWT_SECRET","jwtStrategy","payload","done","id","userId"],"mappings":";;;;;;;;;AAAA;;AAEA,IAAMA,WAAW,GAAGC,wBAAYC,QAAhC;AACA,IAAMC,UAAU,GAAGF,wBAAYE,UAA/B;AAEA,IAAMC,OAAO,GAAG;AACZC,EAAAA,cAAc,EAAEF,UAAU,CAACG,2BAAX,EADJ;AAEZC,EAAAA,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAFb,CAAhB;AAIO,IAAMC,WAAW,GAAG,IAAIX,WAAJ,CAAgBI,OAAhB,EAAyB,UAACQ,OAAD,EAAUC,IAAV,EAAmB;AACnE,SAAOA,IAAI,CAAC,IAAD,EAAO;AAACC,IAAAA,EAAE,EAAEF,OAAO,CAACG;AAAb,GAAP,CAAX;AACH,CAF0B,CAApB","sourceRoot":"/home/alain/Documents/andela/andelabrand/server/config/","sourcesContent":["import passportJwt from \"passport-jwt\"\n\nconst JwtStrategy = passportJwt.Strategy\nconst ExtractJwt = passportJwt.ExtractJwt\n\nconst options = {\n    jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n    secretOrKey: process.env.JWT_SECRET\n}\nexport const jwtStrategy = new JwtStrategy(options, (payload, done) => {\n    return done(null, {id: payload.userId})\n})"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c6c3cac87fb067d9f1be9bcf29e5e7f8820cc612","contentHash":"3dac136c50951d1efbdc6f741da9146783e8089770c7a9f5ae23412bb0b6352b"}}